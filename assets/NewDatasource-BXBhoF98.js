import{p as e,c as a,a$ as t,a4 as l,t as n,s as o,r as i,S as s,aZ as r,a6 as u,T as d,E as c,g as m,N as p,a_ as v,d as f,h as _,x as b,a8 as y,e as h,n as g,f as x,b0 as V,j as k,M as w,b1 as S,Q as $,F as C,ar as A,a as I,a5 as T,m as U,aB as E,as as M,R as B,ap as j,aC as z,a7 as P,aq as N,l as D,G as F,O as L,A as q,q as R,v as O,Y as K,B as W,ak as G,al as Y,K as H,o as J,z as X,W as Z,ah as Q,y as ee,L as ae,am as te,ag as le,aG as ne,ao as oe,b2 as ie,b3 as se,b4 as re,aJ as ue,b5 as de,b6 as ce,aF as me}from"./index-X2pssZTS.js";import{e as pe,d as ve,Y as fe,b as _e,S as be,u as ye,c as he,z as ge,Z as xe,_ as Ve,o as ke,E as we,y as Se,n as $e,$ as Ce,m as Ae,a0 as Ie,a1 as Te,a2 as Ue,h as Ee,N as Me,w as Be,R as je,g as ze,V as Pe,j as Ne,i as De,a3 as Fe,k as Le,q as qe,a4 as Re}from"./ssrBoot-BJN1Wy2u.js";import{a as Oe,S as Ke,b as We,V as Ge}from"./sorting_types-cEVbskoa.js";import{o as Ye,x as He,y as Je,z as Xe,A as Ze,B as Qe,C as ea,c as aa,D as ta,E as la,b as na,a as oa,h as ia,V as sa}from"./VSelect-LIMe1IgN.js";import{V as ra,m as ua,a as da}from"./VTooltip-C_gWb3ji.js";import{V as ca}from"./VFileInput-DmSJGwz6.js";import{V as ma}from"./VCol-DQQf74-R.js";import{a as pa,m as va,b as fa,c as _a,V as ba}from"./VWindowItem-DBSrxN_5.js";import{a as ya}from"./VBottomSheet-CTq9fu3t.js";import"./en-DEkKOPRf.js";const ha=Symbol.for("vuetify:v-slider");function ga(e,a,t){const l="vertical"===t,n=a.getBoundingClientRect(),o="touches"in e?e.touches[0]:e;return l?o.clientY-(n.top+n.height/2):o.clientX-(n.left+n.width/2)}const xa=e({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>"boolean"==typeof e||"always"===e},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>"boolean"==typeof e||"always"===e},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...ve(),...pe({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),Va=e=>{const l=a(()=>parseFloat(e.min)),n=a(()=>parseFloat(e.max)),o=a(()=>Number(e.step)>0?parseFloat(e.step):0),i=a(()=>Math.max(t(o.value),t(l.value)));return{min:l,max:n,step:o,decimals:i,roundValue:function(e){if(e=parseFloat(e),o.value<=0)return e;const a=u(e,l.value,n.value),t=l.value%o.value;let s=Math.round((a-t)/o.value)*o.value+t;return a>s&&s+o.value>n.value&&(s=n.value),parseFloat(Math.min(s,n.value).toFixed(i.value))}}},ka=e=>{let{props:t,steps:m,onSliderStart:p,onSliderMove:v,onSliderEnd:f,getActiveThumb:_}=e;const b=Ye(t),{isRtl:y}=l(),h=n(()=>t.reverse),g=a(()=>"vertical"===t.direction),x=a(()=>g.value!==h.value),{min:V,max:k,step:w,decimals:S,roundValue:$}=m,C=a(()=>parseInt(t.thumbSize,10)),A=a(()=>parseInt(t.tickSize,10)),I=a(()=>parseInt(t.trackSize,10)),T=a(()=>(k.value-V.value)/w.value),U=a(()=>t.error||b.isDisabled.value?void 0:t.thumbColor??t.color),E=a(()=>t.error||b.isDisabled.value?void 0:t.thumbColor),M=a(()=>t.error||b.isDisabled.value?void 0:t.trackColor??t.color),B=a(()=>t.error||b.isDisabled.value?void 0:t.trackFillColor??t.color),j=o(!1),z=o(0),P=i(),N=i();function D(e){const a=P.value?.$el;if(!a)return;const l="vertical"===t.direction,n=l?"top":"left",o=l?"height":"width",i=l?"clientY":"clientX",{[n]:s,[o]:r}=a.getBoundingClientRect(),d=function(e,a){return"touches"in e&&e.touches.length?e.touches[0][a]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][a]:e[a]}(e,i);let c=u((d-s-z.value)/r)||0;return(l?x.value:x.value!==y.value)&&(c=1-c),$(V.value+c*(k.value-V.value))}const F=e=>{const a=D(e);null!=a&&f({value:a}),j.value=!1,z.value=0},L=e=>{const a=D(e);N.value=_(e),N.value&&(j.value=!0,N.value.contains(e.target)?z.value=ga(e,N.value,t.direction):(z.value=0,null!=a&&v({value:a})),null!=a&&p({value:a}),d(()=>N.value?.focus()))},q={passive:!0,capture:!0};function R(e){const a=D(e);null!=a&&v({value:a})}function O(e){e.stopPropagation(),e.preventDefault(),F(e),window.removeEventListener("mousemove",R,q),window.removeEventListener("mouseup",O)}function K(e){F(e),window.removeEventListener("touchmove",R,q),e.target?.removeEventListener("touchend",K)}s(()=>{window.removeEventListener("touchmove",R),window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",O)});const W=e=>{const a=(e-V.value)/(k.value-V.value)*100;return u(isNaN(a)?0:a,0,100)},G=n(()=>t.showTicks),Y=a(()=>G.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(e=>({value:e,position:W(e),label:e.toString()})):Object.keys(t.ticks).map(e=>({value:parseFloat(e),position:W(parseFloat(e)),label:t.ticks[e]})):T.value!==1/0?r(T.value+1).map(e=>{const a=V.value+e*w.value;return{value:a,position:W(a)}}):[]:[]),H=a(()=>Y.value.some(e=>{let{label:a}=e;return!!a})),J={activeThumbRef:N,color:n(()=>t.color),decimals:S,disabled:b.isDisabled,direction:n(()=>t.direction),elevation:n(()=>t.elevation),hasLabels:H,isReversed:h,indexFromEnd:x,min:V,max:k,mousePressed:j,noKeyboard:n(()=>t.noKeyboard),numTicks:T,onSliderMousedown:function(e){0===e.button&&(e.preventDefault(),L(e),window.addEventListener("mousemove",R,q),window.addEventListener("mouseup",O,{passive:!1}))},onSliderTouchstart:function(e){L(e),window.addEventListener("touchmove",R,q),e.target?.addEventListener("touchend",K,{passive:!1})},parsedTicks:Y,parseMouseMove:D,position:W,readonly:b.isReadonly,rounded:n(()=>t.rounded),roundValue:$,showTicks:G,startOffset:z,step:w,thumbSize:C,thumbColor:U,thumbLabelColor:E,thumbLabel:n(()=>t.thumbLabel),ticks:n(()=>t.ticks),tickSize:A,trackColor:M,trackContainerRef:P,trackFillColor:B,trackSize:I,vertical:g};return c(ha,J),J},wa=e({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...k()},"VSliderThumb"),Sa=m()({name:"VSliderThumb",directives:{vRipple:fe},props:wa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:o}=t;const i=p(ha),{isRtl:s,rtlClasses:r}=l();if(!i)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:u,max:d,thumbColor:c,thumbLabelColor:m,step:k,disabled:w,thumbSize:S,thumbLabel:$,direction:C,isReversed:A,vertical:I,readonly:T,elevation:U,mousePressed:E,decimals:M,indexFromEnd:B}=i,j=a(()=>w.value?void 0:U.value),{elevationClasses:z}=_e(j),{textColorClasses:P,textColorStyles:N}=be(c),{backgroundColorClasses:D,backgroundColorStyles:F}=ye(m),{pageup:L,pagedown:q,end:R,home:O,left:K,right:W,down:G,up:Y}=v,H=[L,q,R,O,K,W,G,Y],J=a(()=>k.value?[1,2,3]:[1,5,10]);function X(a){const t=function(a,t){if(e.noKeyboard||w.value)return;if(!H.includes(a.key))return;a.preventDefault();const l=k.value||.1,n=(d.value-u.value)/l;if([K,W,G,Y].includes(a.key)){const e=(I.value?[s.value?K:W,A.value?G:Y]:B.value!==s.value?[K,Y]:[W,Y]).includes(a.key)?1:-1,o=a.shiftKey?2:a.ctrlKey?1:0;-1!==e||t!==d.value||o||Number.isInteger(n)?t+=e*l*J.value[o]:t-=n%1*l}else a.key===O?t=u.value:a.key===R?t=d.value:t-=(a.key===q?1:-1)*l*(n>100?n/10:10);return Math.max(e.min,Math.min(e.max,t))}(a,e.modelValue);null!=t&&o("update:modelValue",t)}return f(()=>{const a=_(B.value?100-e.position:e.position,"%");return b("div",{class:x(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&E.value},e.class,r.value]),style:g([{"--v-slider-thumb-position":a,"--v-slider-thumb-size":_(S.value)},e.style]),role:"slider",tabindex:w.value?-1:0,"aria-label":e.name,"aria-valuemin":u.value,"aria-valuemax":d.value,"aria-valuenow":e.modelValue,"aria-readonly":!!T.value,"aria-orientation":C.value,onKeydown:T.value?void 0:X},[b("div",{class:x(["v-slider-thumb__surface",P.value,z.value]),style:g(N.value)},null),y(b("div",{class:x(["v-slider-thumb__ripple",P.value]),style:g(N.value)},null),[[fe,e.ripple,null,{circle:!0,center:!0}]]),h(He,{origin:"bottom center"},{default:()=>[y(b("div",{class:"v-slider-thumb__label-container"},[b("div",{class:x(["v-slider-thumb__label",D.value]),style:g(F.value)},[b("div",null,[n["thumb-label"]?.({modelValue:e.modelValue})??e.modelValue.toFixed(k.value?M.value:1)]),b("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[V,$.value&&e.focused||"always"===$.value]])]})])}),{}}}),$a=e({start:{type:Number,required:!0},stop:{type:Number,required:!0},...k()},"VSliderTrack"),Ca=m()({name:"VSliderTrack",props:$a(),emits:{},setup(e,t){let{slots:l}=t;const n=p(ha);if(!n)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:o,parsedTicks:i,rounded:s,showTicks:r,tickSize:u,trackColor:d,trackFillColor:c,trackSize:m,vertical:v,min:y,max:h,indexFromEnd:V}=n,{roundedClasses:k}=he(s),{backgroundColorClasses:w,backgroundColorStyles:S}=ye(c),{backgroundColorClasses:$,backgroundColorStyles:C}=ye(d),A=a(()=>`inset-${v.value?"block":"inline"}-${V.value?"end":"start"}`),I=a(()=>v.value?"height":"width"),T=a(()=>({[A.value]:"0%",[I.value]:"100%"})),U=a(()=>e.stop-e.start),E=a(()=>({[A.value]:_(e.start,"%"),[I.value]:_(U.value,"%")})),M=a(()=>{if(!r.value)return[];return(v.value?i.value.slice().reverse():i.value).map((a,t)=>{const n=a.value!==y.value&&a.value!==h.value?_(a.position,"%"):void 0;return b("div",{key:a.value,class:x(["v-slider-track__tick",{"v-slider-track__tick--filled":a.position>=e.start&&a.position<=e.stop,"v-slider-track__tick--first":a.value===y.value,"v-slider-track__tick--last":a.value===h.value}]),style:{[A.value]:n}},[(a.label||l["tick-label"])&&b("div",{class:"v-slider-track__tick-label"},[l["tick-label"]?.({tick:a,index:t})??a.label])])})});return f(()=>b("div",{class:x(["v-slider-track",k.value,e.class]),style:g([{"--v-slider-track-size":_(m.value),"--v-slider-tick-size":_(u.value)},e.style])},[b("div",{class:x(["v-slider-track__background",$.value,{"v-slider-track__background--opacity":!!o.value||!c.value}]),style:{...T.value,...C.value}},null),b("div",{class:x(["v-slider-track__fill",w.value]),style:{...E.value,...S.value}},null),r.value&&b("div",{class:x(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":"always"===r.value}])},[M.value])])),{}}}),Aa=e({...ea(),...xa(),...Qe(),modelValue:{type:[Number,String],default:0}},"VSlider"),Ia=m()({name:"VSlider",inheritAttrs:!1,props:Aa(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:o,attrs:s}=t;const r=i(),u=i(),{rtlClasses:d}=l(),c=Va(e),m=w(e,"modelValue",void 0,e=>c.roundValue(null==e?c.min.value:e)),{min:p,max:v,mousePressed:_,roundValue:y,onSliderMousedown:g,onSliderTouchstart:x,trackContainerRef:V,position:k,hasLabels:A,disabled:I,readonly:T,noKeyboard:U}=ka({props:e,steps:c,onSliderStart:()=>{I.value||T.value||o("start",m.value)},onSliderEnd:e=>{let{value:a}=e;const t=y(a);I.value||T.value||(m.value=t),o("end",t)},onSliderMove:e=>{let{value:a}=e;I.value||T.value||(m.value=y(a))},getActiveThumb:()=>r.value?.$el}),{isFocused:E,focus:M,blur:B}=Je(e),j=a(()=>k(m.value));return f(()=>{const a=Xe.filterProps(e),[t,l]=S(s),o=!!(e.label||n.label||n.prepend);return h(Xe,$({ref:u,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||A.value,"v-slider--focused":E.value,"v-slider--pressed":_.value,"v-slider--disabled":I.value},d.value,e.class],style:e.style},a,t,{focused:E.value}),{...n,prepend:o?a=>b(C,null,[n.label?.(a)??(e.label?h(Ze,{id:a.id.value,class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(a)]):void 0,default:a=>{let{id:t,messagesId:o}=a;return b("div",{class:"v-slider__container",onMousedown:T.value?void 0:g,onTouchstartPassive:T.value?void 0:x},[b("input",{id:t.value,name:e.name||t.value,disabled:I.value,readonly:T.value,tabindex:"-1",value:m.value},null),h(Ca,{ref:V,start:0,stop:j.value},{"tick-label":n["tick-label"]}),h(Sa,$({ref:r,"aria-describedby":o.value,focused:E.value,noKeyboard:U.value,min:p.value,max:v.value,modelValue:m.value,"onUpdate:modelValue":e=>m.value=e,position:j.value,elevation:e.elevation,onFocus:M,onBlur:B,ripple:e.ripple,name:e.name},l),{"thumb-label":n["thumb-label"]})])}})}),ge({focus:()=>r.value?.$el.focus()},u)}}),Ta=Symbol.for("vuetify:v-expansion-panel"),Ua=e({...k(),...Ve()},"VExpansionPanelText"),Ea=m()({name:"VExpansionPanelText",props:Ua(),setup(e,a){let{slots:t}=a;const l=p(Ta);if(!l)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:n,onAfterLeave:o}=xe(e,l.isSelected);return f(()=>h(aa,{onAfterLeave:o},{default:()=>[y(b("div",{class:x(["v-expansion-panel-text",e.class]),style:g(e.style)},[t.default&&n.value&&b("div",{class:"v-expansion-panel-text__wrapper"},[t.default?.()])]),[[V,l.isSelected.value]])]})),{}}}),Ma=e({color:String,expandIcon:{type:A,default:"$expand"},collapseIcon:{type:A,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...k(),...$e()},"VExpansionPanelTitle"),Ba=m()({name:"VExpansionPanelTitle",directives:{vRipple:fe},props:Ma(),setup(e,t){let{slots:l}=t;const o=p(Ta);if(!o)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:i,backgroundColorStyles:s}=ye(()=>e.color),{dimensionStyles:r}=ke(e),u=a(()=>({collapseIcon:e.collapseIcon,disabled:o.disabled.value,expanded:o.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),d=n(()=>o.isSelected.value?e.collapseIcon:e.expandIcon);return f(()=>y(b("button",{class:x(["v-expansion-panel-title",{"v-expansion-panel-title--active":o.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},i.value,e.class]),style:g([s.value,r.value,e.style]),type:"button",tabindex:o.disabled.value?-1:void 0,disabled:o.disabled.value,"aria-expanded":o.isSelected.value,onClick:e.readonly?void 0:o.toggle},[b("span",{class:"v-expansion-panel-title__overlay"},null),l.default?.(u.value),!e.hideActions&&h(Se,{defaults:{VIcon:{icon:d.value}}},{default:()=>[b("span",{class:"v-expansion-panel-title__icon"},[l.actions?.(u.value)??h(we,null,null)])]})]),[[fe,e.ripple]])),{}}}),ja=e({title:String,text:String,bgColor:String,...pe(),...Ie(),...ve(),...Ae(),...Ma(),...Ua()},"VExpansionPanel"),za=m()({name:"VExpansionPanel",props:ja(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:l}=t;const o=Ce(e,Ta),{backgroundColorClasses:i,backgroundColorStyles:s}=ye(()=>e.bgColor),{elevationClasses:r}=_e(e),{roundedClasses:u}=he(e),d=n(()=>o?.disabled.value||e.disabled),m=a(()=>o.group.items.value.reduce((e,a,t)=>(o.group.selected.value.includes(a.id)&&e.push(t),e),[])),p=a(()=>{const e=o.group.items.value.findIndex(e=>e.id===o.id);return!o.isSelected.value&&m.value.some(a=>a-e===1)}),v=a(()=>{const e=o.group.items.value.findIndex(e=>e.id===o.id);return!o.isSelected.value&&m.value.some(a=>a-e===-1)});return c(Ta,o),f(()=>{const a=!(!l.text&&!e.text),t=!(!l.title&&!e.title),n=Ba.filterProps(e),c=Ea.filterProps(e);return h(e.tag,{class:x(["v-expansion-panel",{"v-expansion-panel--active":o.isSelected.value,"v-expansion-panel--before-active":p.value,"v-expansion-panel--after-active":v.value,"v-expansion-panel--disabled":d.value},u.value,i.value,e.class]),style:g([s.value,e.style])},{default:()=>[b("div",{class:x(["v-expansion-panel__shadow",...r.value])},null),h(Se,{defaults:{VExpansionPanelTitle:{...n},VExpansionPanelText:{...c}}},{default:()=>[t&&h(Ba,{key:"title"},{default:()=>[l.title?l.title():e.title]}),a&&h(Ea,{key:"text"},{default:()=>[l.text?l.text():e.text]}),l.default?.()]})]})}),{groupItem:o}}}),Pa=["default","accordion","inset","popout"],Na=e({flat:Boolean,...Ue(),...E(ja(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...U(),...k(),...Ae(),variant:{type:String,default:"default",validator:e=>Pa.includes(e)}},"VExpansionPanels"),Da=m()({name:"VExpansionPanels",props:Na(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const{next:l,prev:o}=Te(e,Ta),{themeClasses:i}=I(e),s=n(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return T({VExpansionPanel:{bgColor:n(()=>e.bgColor),collapseIcon:n(()=>e.collapseIcon),color:n(()=>e.color),eager:n(()=>e.eager),elevation:n(()=>e.elevation),expandIcon:n(()=>e.expandIcon),focusable:n(()=>e.focusable),hideActions:n(()=>e.hideActions),readonly:n(()=>e.readonly),ripple:n(()=>e.ripple),rounded:n(()=>e.rounded),static:n(()=>e.static)}}),f(()=>h(e.tag,{class:x(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},i.value,s.value,e.class]),style:g(e.style)},{default:()=>[t.default?.({prev:o,next:l})]})),{next:l,prev:o}}}),Fa=e({...k(),...la()},"VForm"),La=m()({name:"VForm",props:Fa(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,a){let{slots:t,emit:l}=a;const n=ta(e),o=i();function s(e){e.preventDefault(),n.reset()}function r(e){const a=e,t=n.validate();a.then=t.then.bind(t),a.catch=t.catch.bind(t),a.finally=t.finally.bind(t),l("submit",a),a.defaultPrevented||t.then(e=>{let{valid:a}=e;a&&o.value?.submit()}),a.preventDefault()}return f(()=>b("form",{ref:o,class:x(["v-form",e.class]),style:g(e.style),novalidate:!0,onReset:s,onSubmit:r},[t.default?.(n)])),ge(n,o)}}),qa=e({...ea(),...Qe(),...xa(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),Ra=m()({name:"VRangeSlider",inheritAttrs:!1,props:qa(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:o,attrs:s}=t;const r=i(),u=i(),d=i(),{rtlClasses:c}=l();const m=Va(e),p=w(e,"modelValue",void 0,e=>e?.length?e.map(e=>m.roundValue(e)):[0,0]),{activeThumbRef:v,hasLabels:_,max:y,min:g,mousePressed:x,onSliderMousedown:V,onSliderTouchstart:k,position:A,trackContainerRef:I,disabled:T,readonly:U}=ka({props:e,steps:m,onSliderStart:()=>{T.value||U.value?v.value?.blur():o("start",p.value)},onSliderEnd:a=>{let{value:t}=a;if(T.value||U.value)v.value?.blur();else{const a=v.value===r.value?.$el?[t,p.value[1]]:[p.value[0],t];!e.strict&&a[0]<a[1]&&(p.value=a)}o("end",p.value)},onSliderMove:a=>{let{value:t}=a;const[l,n]=p.value;T.value||U.value?v.value?.blur():(e.strict||l!==n||l===g.value||(v.value=t>l?u.value?.$el:r.value?.$el,v.value?.focus()),v.value===r.value?.$el?p.value=[Math.min(t,n),n]:p.value=[l,Math.max(l,t)])},getActiveThumb:function(a){if(!r.value||!u.value)return;const t=ga(a,r.value.$el,e.direction),l=ga(a,u.value.$el,e.direction),n=Math.abs(t),o=Math.abs(l);return n<o||n===o&&t<0?r.value.$el:u.value.$el}}),{isFocused:E,focus:M,blur:B}=Je(e),j=a(()=>A(p.value[0])),z=a(()=>A(p.value[1]));return f(()=>{const a=Xe.filterProps(e),[t,l]=S(s),o=!!(e.label||n.label||n.prepend);return h(Xe,$({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||_.value,"v-slider--focused":E.value,"v-slider--pressed":x.value,"v-slider--disabled":T.value},c.value,e.class],style:e.style,ref:d},a,t,{focused:E.value}),{...n,prepend:o?a=>b(C,null,[n.label?.(a)??(e.label?h(Ze,{class:"v-slider__label",text:e.label},null):void 0),n.prepend?.(a)]):void 0,default:a=>{let{id:t,messagesId:o}=a;return b("div",{class:"v-slider__container",onMousedown:U.value?void 0:V,onTouchstartPassive:U.value?void 0:k},[b("input",{id:`${t.value}_start`,name:e.name||t.value,disabled:T.value,readonly:U.value,tabindex:"-1",value:p.value[0]},null),b("input",{id:`${t.value}_stop`,name:e.name||t.value,disabled:T.value,readonly:U.value,tabindex:"-1",value:p.value[1]},null),h(Ca,{ref:I,start:j.value,stop:z.value},{"tick-label":n["tick-label"]}),h(Sa,$({ref:r,"aria-describedby":o.value,focused:E&&v.value===r.value?.$el,modelValue:p.value[0],"onUpdate:modelValue":e=>p.value=[e,p.value[1]],onFocus:e=>{M(),v.value=r.value?.$el,y.value!==g.value&&p.value[0]===p.value[1]&&p.value[1]===g.value&&e.relatedTarget!==u.value?.$el&&(r.value?.$el.blur(),u.value?.$el.focus())},onBlur:()=>{B(),v.value=void 0},min:g.value,max:p.value[1],position:j.value,ripple:e.ripple},l),{"thumb-label":n["thumb-label"]}),h(Sa,$({ref:u,"aria-describedby":o.value,focused:E&&v.value===u.value?.$el,modelValue:p.value[1],"onUpdate:modelValue":e=>p.value=[p.value[0],e],onFocus:e=>{M(),v.value=u.value?.$el,y.value!==g.value&&p.value[0]===p.value[1]&&p.value[0]===y.value&&e.relatedTarget!==r.value?.$el&&(u.value?.$el.blur(),r.value?.$el.focus())},onBlur:()=>{B(),v.value=void 0},min:p.value[0],max:y.value,position:z.value,ripple:e.ripple},l),{"thumb-label":n["thumb-label"]})])}})}),ge({focus:()=>r.value?.$el.focus()},d)}}),Oa=Symbol.for("vuetify:v-stepper"),Ka=e({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),Wa=m()({name:"VStepperActions",props:Ka(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,a){let{emit:t,slots:l}=a;const{t:n}=M();function o(){t("click:prev")}function i(){t("click:next")}return f(()=>{const a={onClick:o},t={onClick:i};return b("div",{class:"v-stepper-actions"},[h(Se,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:n(e.prevText),variant:"text"}}},{default:()=>[l.prev?.({props:a})??h(Ee,a,null)]}),h(Se,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:n(e.nextText),variant:"tonal"}}},{default:()=>[l.next?.({props:t})??h(Ee,t,null)]})])}),{}}}),Ga=Me("v-stepper-header"),Ya=e({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:A,default:"$complete"},editable:Boolean,editIcon:{type:A,default:"$edit"},error:Boolean,errorIcon:{type:A,default:"$error"},icon:A,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Ha=e({...Ya(),...Ie()},"VStepperItem"),Ja=m()({name:"VStepperItem",directives:{vRipple:fe},props:Ha(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:l}=t;const n=Ce(e,Oa,!0),o=a(()=>n?.value.value??e.value),i=a(()=>e.rules.every(e=>!0===e())),s=a(()=>!e.disabled&&e.editable),r=a(()=>!e.disabled&&e.editable),u=a(()=>e.error||!i.value),d=a(()=>e.complete||e.rules.length>0&&i.value),c=a(()=>u.value?e.errorIcon:d.value?e.completeIcon:n.isSelected.value&&e.editable?e.editIcon:e.icon),m=a(()=>({canEdit:r.value,hasError:u.value,hasCompleted:d.value,title:e.title,subtitle:e.subtitle,step:o.value,value:e.value}));return f(()=>{const a=(!n||n.isSelected.value||d.value||r.value)&&!u.value&&!e.disabled,t=!(null==e.title&&!l.title),i=!(null==e.subtitle&&!l.subtitle);return y(b("button",{class:x(["v-stepper-item",{"v-stepper-item--complete":d.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":u.value},n?.selectedClass.value]),disabled:!e.editable,type:"button",onClick:function(){n?.toggle()}},[s.value&&Be(!0,"v-stepper-item"),h(je,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:a?e.color:void 0,size:24},{default:()=>[l.icon?.(m.value)??(c.value?h(we,{icon:c.value},null):o.value)]}),b("div",{class:"v-stepper-item__content"},[t&&b("div",{key:"title",class:"v-stepper-item__title"},[l.title?.(m.value)??e.title]),i&&b("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[l.subtitle?.(m.value)??e.subtitle]),l.default?.(m.value)])]),[[fe,e.editable&&e.ripple,null]])}),{}}}),Xa=e({...B(va(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),Za=m()({name:"VStepperWindow",props:Xa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const n=p(Oa,null),o=w(e,"modelValue"),i=a({get:()=>null==o.value&&n?n.items.value.find(e=>n.selected.value.includes(e.id))?.value:o.value,set(e){o.value=e}});return f(()=>{const a=pa.filterProps(e);return h(pa,$({_as:"VStepperWindow"},a,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),l)}),{}}}),Qa=e({..._a()},"VStepperWindowItem"),et=m()({name:"VStepperWindowItem",props:Qa(),setup(e,a){let{slots:t}=a;return f(()=>{const a=fa.filterProps(e);return h(fa,$({_as:"VStepperWindowItem"},a,{class:["v-stepper-window-item",e.class],style:e.style}),t)}),{}}}),at=e({altLabels:Boolean,bgColor:String,completeIcon:A,editIcon:A,editable:Boolean,errorIcon:A,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},nonLinear:Boolean,flat:Boolean,...N()},"Stepper"),tt=e({...at(),...Ue({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...ua(),...E(Ka(),["prevText","nextText"])},"VStepper"),lt=m()({name:"VStepper",props:tt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const{items:n,next:o,prev:i,selected:s}=Te(e,Oa),{displayClasses:r,mobile:u}=j(e),{completeIcon:d,editIcon:c,errorIcon:m,color:p,editable:v,prevText:_,nextText:y}=z(e),g=a(()=>e.items.map((a,t)=>{const l={title:P(a,e.itemTitle,a),value:P(a,e.itemValue,t+1),...!0===e.itemProps?a:P(a,e.itemProps)};return{title:l.title,value:l.value,props:l,raw:a}})),x=a(()=>n.value.findIndex(e=>s.value.includes(e.id))),V=a(()=>e.disabled?e.disabled:0===x.value?"prev":x.value===n.value.length-1&&"next");return T({VStepperItem:{editable:v,errorIcon:m,completeIcon:d,editIcon:c,prevText:_,nextText:y},VStepperActions:{color:p,disabled:V,prevText:_,nextText:y}}),f(()=>{const a=ra.filterProps(e),t=!(!l.header&&!e.items.length),n=e.items.length>0,s=!(e.hideActions||!n&&!l.actions);return h(ra,$(a,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":u.value},r.value,e.class],style:e.style}),{default:()=>[t&&h(Ga,{key:"stepper-header"},{default:()=>[g.value.map((e,a)=>{let{raw:t,...n}=e;return b(C,null,[!!a&&h(na,null,null),h(Ja,n.props,{default:l[`header-item.${n.value}`]??l.header,icon:l.icon,title:l.title,subtitle:l.subtitle})])})]}),n&&h(Za,{key:"stepper-window"},{default:()=>[g.value.map(e=>h(et,{value:e.value},{default:()=>l[`item.${e.value}`]?.(e)??l.item?.(e)}))]}),l.default?.({prev:i,next:o}),s&&(l.actions?.({next:o,prev:i})??h(Wa,{key:"stepper-actions","onClick:prev":i,"onClick:next":o},l))]})}),{prev:i,next:o}}}),nt=D({__name:"HoverableRating",props:{readonly:{type:Boolean},configuration:{}},setup(e){const t=e,l=i(1),n=i(null);function o(){n.value=null}const s=a(()=>(n.value??l.value)-1);function r(e,a=document.querySelector("#bbcca2d8-6e82-471c-85ac-0221358ee09a")){if(null!==a)for(const[t,l]of a.querySelectorAll("button").entries())t<(e??0)||l.addEventListener("mouseover",()=>{var e;e=t+1,n.value=e})}function u(){const e=document.querySelector("#bbcca2d8-6e82-471c-85ac-0221358ee09a");null!==e&&(e.addEventListener("mouseleave",o),r(0,e))}return F(u),L(()=>t.configuration,(e,a)=>{d().then(()=>{null===a.hints&&null!==e.hints&&u(),a.maximum_score>=e.maximum_score||r(a.maximum_score)})}),(e,a)=>(R(),q(ze,null,{default:O(()=>[h(Pe,{justify:"center"},{default:O(()=>[h(Oe,{id:"bbcca2d8-6e82-471c-85ac-0221358ee09a",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),hover:"",length:t.configuration.maximum_score,readonly:t.readonly??!1},null,8,["modelValue","length","readonly"])]),_:1}),null!==t.configuration.hints?(R(),q(Pe,{key:0,justify:"center"},{default:O(()=>[b("div",null,W(t.configuration.hints[s.value]),1)]),_:1})):K("",!0)]),_:1}))}}),ot={minimum_score:2,maximum_score:10},it=D({__name:"DatasourceCreationEntryRating",props:{modelValue:{required:!0},modelModifiers:{}},emits:G(["ready"],["update:modelValue"]),setup(e,{expose:a,emit:t}){const l=Y(e,"modelValue"),n=i(!1);a({SortingMethodsAvailable:[Ke.AsNumber,Ke.Disabled]});const o=t;return F(()=>{n.value=l.value.hints.slice(0,l.value.maximum_score).map(e=>e.trim()).some(e=>e.length>0),o("ready")}),(e,a)=>{const t=nt;return R(),q(De,null,{default:O(()=>[h(Ne,null,{default:O(()=>[h(Ia,{modelValue:l.value.maximum_score,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.maximum_score=e),color:"primary","hide-details":"",label:e.$t("datasource_creation.rating_maximum"),max:H(ot).maximum_score,min:H(ot).minimum_score,step:1},{append:O(()=>[h(We,{modelValue:l.value.maximum_score,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.maximum_score=e),"control-variant":"stacked",density:"compact",max:H(ot).maximum_score,min:H(ot).minimum_score,step:1,style:{width:"80px"}},null,8,["modelValue","max","min"])]),_:1},8,["modelValue","label","max","min"]),h(Ge,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value=e),color:"primary",label:e.$t("datasource_creation.rating_use_hint")},null,8,["modelValue","label"]),n.value?(R(),q(ze,{key:0},{default:O(()=>[(R(!0),J(C,null,X(l.value.maximum_score,e=>(R(),q(oa,{key:e,modelValue:l.value.hints[e-1],"onUpdate:modelValue":a=>l.value.hints[e-1]=a,clearable:"",density:"comfortable",label:e.toString()},null,8,["modelValue","onUpdate:modelValue","label"]))),128)),h(t,{configuration:l.value},null,8,["configuration"])]),_:1})):K("",!0)]),_:1})]),_:1})}}}),st=D({__name:"DatasourceCreationEntryString",props:{modelValue:{required:!0},modelModifiers:{}},emits:G(["ready"],["update:modelValue"]),setup(e,{expose:a,emit:t}){const l=Y(e,"modelValue");a({SortingMethodsAvailable:[Ke.Disabled,Ke.AsString,Ke.AsNumber,Ke.AsDate]});const n=t;return F(()=>{n("ready")}),(e,a)=>(R(),q(De,null,{default:O(()=>[h(Ne,null,{default:O(()=>[h(Ge,{modelValue:l.value.unique,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.unique=e),color:"primary",hint:e.$t("datasource_creation.string_unique_hint"),label:e.$t("datasource_creation.string_unique"),"persistent-hint":""},null,8,["modelValue","hint","label"])]),_:1})]),_:1}))}}),rt=D({__name:"DatasourceCreationEntryTag",props:{modelValue:{required:!0},modelModifiers:{}},emits:G(["ready"],["update:modelValue"]),setup(e,{expose:a,emit:t}){const l=Y(e,"modelValue");a({SortingMethodsAvailable:[Ke.Disabled,Ke.AsString]});const n=t;return F(()=>{n("ready")}),(e,a)=>(R(),q(De,null,{default:O(()=>[h(Ne,null,{default:O(()=>[h(Ge,{modelValue:l.value.exclusive,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.exclusive=e),color:"primary",hint:e.$t("datasource_creation.tag_exclusive_hint"),label:e.$t("datasource_creation.tag_exclusive"),"persistent-hint":""},null,8,["modelValue","hint","label"])]),_:1})]),_:1}))}}),ut=D({__name:"DatasourceCreationEntryBase",props:G({index:{},total:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:G(["moveUp","moveDown","remove"],["update:modelValue"]),setup(e,{emit:a}){const{t:t}=Z.global,l=Y(e,"modelValue"),n=a,o=new Map([["string",st],["tag",rt],["rating",it]]),i={name:"string",type:st},s=[...o.keys()].map(e=>({internal_name:e,display_name:t(`datasource_creation.entry_types.${e}.name`)})),r=Q("detail_configuration");function u(){r.value.SortingMethodsAvailable.includes(l.value.sorting_method)||(l.value.sorting_method=r.value.SortingMethodsAvailable[0])}return(a,t)=>(R(),q(De,{class:"my-4",width:"100%"},{default:O(()=>[h(Fe,null,{append:O(()=>[0!==e.index?(R(),q(da,{key:0,text:a.$t("action.move_up")},{activator:O(({props:e})=>[h(ia,$(e,{variant:"text",onClick:t[0]||(t[0]=ae(e=>n("moveUp"),["stop"]))}),{default:O(()=>[h(we,{icon:"mdi-arrow-up"})]),_:1},16)]),_:1},8,["text"])):K("",!0),e.index!==e.total-1?(R(),q(da,{key:1,text:a.$t("action.move_down")},{activator:O(({props:e})=>[h(ia,$(e,{variant:"text",onClick:t[1]||(t[1]=ae(e=>n("moveDown"),["stop"]))}),{default:O(()=>[h(we,{icon:"mdi-arrow-down"})]),_:1},16)]),_:1},8,["text"])):K("",!0),h(da,{text:a.$t("action.remove")},{activator:O(({props:e})=>[h(ia,$(e,{variant:"text",onClick:t[2]||(t[2]=ae(e=>n("remove"),["stop"]))}),{default:O(()=>[h(we,{icon:"mdi-delete"})]),_:1},16)]),_:1},8,["text"])]),default:O(()=>[h(Le,null,{default:O(()=>[ee(W(l.value.name),1)]),_:1})]),_:1}),h(Ne,null,{default:O(()=>[h(ze,null,{default:O(()=>[h(Pe,null,{default:O(()=>[h(oa,{modelValue:l.value.name,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.name=e),label:a.$t("datasource_creation.entry_name")},null,8,["modelValue","label"])]),_:1}),h(Pe,{class:"my-4"},{default:O(()=>[h(sa,{modelValue:l.value.type,"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.type=e),hint:a.$t(`datasource_creation.entry_types.${l.value.type}.description`),"item-title":"display_name","item-value":"internal_name",items:H(s),label:a.$t("datasource_creation.entry_type"),"persistent-hint":""},null,8,["modelValue","hint","items","label"])]),_:1}),h(Pe,{class:"my-4"},{default:O(()=>[h(sa,{modelValue:l.value.sorting_method,"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.sorting_method=e),disabled:1===r.value?.SortingMethodsAvailable.length,hint:a.$t(`sorting.${l.value.sorting_method}.description`),"item-title":"display","item-value":"name",items:r.value?.SortingMethodsAvailable.map(e=>({name:e,display:a.$t(`sorting.${e}.name`)})),label:a.$t("datasource_creation.entry_sorting_method"),"persistent-hint":""},null,8,["modelValue","disabled","hint","items","label"])]),_:1}),h(Pe,{class:"my-4"},{default:O(()=>[h(Ge,{modelValue:l.value.optional,"onUpdate:modelValue":t[6]||(t[6]=e=>l.value.optional=e),color:"primary",density:"comfortable",hint:a.$t("datasource_creation.optional_detail"),label:a.$t("datasource_creation.optional"),"persistent-hint":""},null,8,["modelValue","hint","label"])]),_:1})]),_:1}),h(na,{class:"my-4"}),(R(),q(te(H(o).get(l.value.type)??i.type),{ref:"detail_configuration",modelValue:l.value,"onUpdate:modelValue":t[7]||(t[7]=e=>l.value=e),onReady:u},null,40,["modelValue"]))]),_:1})]),_:1}))}}),{t:dt}=Z.global;function ct(e){const a=[];void 0!==e.image_size&&((e.image_size.height<=0||e.image_size.width<=0)&&a.push(dt("datasource_creation.error.image_size_not_positive")),Number.isInteger(e.image_size.height)&&Number.isInteger(e.image_size.width)||a.push(dt("datasource_creation.error.image_size_not_integer")));const t=new Set,l=new Set;for(const[n,o]of e.entries.entries())0===o.name.length?a.push(dt("datasource_creation.error.entry_name_is_empty",{index:n+1})):l.has(o.name)||(t.has(o.name)?(a.push(dt("datasource_creation.error.entry_name_is_duplicated",{name:o.name})),l.add(o.name)):t.add(o.name)),"rating"===o.type&&(!Number.isInteger(o.maximum_score)||o.maximum_score<ot.minimum_score||o.maximum_score>ot.maximum_score?a.push(dt("datasource_creation.error.bad_rating_max_score",{name:o.name,index:n+1})):null!==o.hints&&o.hints.length!==o.maximum_score&&a.push(dt("datasource_creation.error.rating_hint_mismatch",{score:o.maximum_score,hint:o.hints.length})));return void 0===e.image_size&&0===e.entries.length&&a.push(dt("datasource_creation.error.empty_database")),a}function mt(e,a){const t=Object.getOwnPropertyDescriptor(e,a);return void 0!==t&&void 0!==t.value}function pt(e,a,t,l){return void 0===e[a]?`missing ${l}.${a}`:mt(e,a)?typeof e[a]!==t?`${l}.${a} is not a ${t} as expected`:void 0:`${l}.${a} is implemented by getter`}function vt(e){if(null===e)return["entry is null"];if("object"!=typeof e)return["entry is not an object"];if(Object.getPrototypeOf(e)!==Object.prototype)return["entry is not an plain object: nothing special, just { ... }"];const a=[];for(const{name:t,type:l}of[{name:"name",type:"string"},{name:"sorting_method",type:"string"},{name:"optional",type:"boolean"}]){const n=pt(e,t,l,"");void 0!==n&&a.push(n)}{const t=pt(e,"type","string","");if(void 0!==t)return a.push(t),a;if(!["string","tag","rating"].includes(e.type))return a.push(`unsupported type ${e.type}`),a}switch(e.type){case"string":{const t=pt(e,"unique","boolean","");void 0!==t&&a.push(t);break}case"tag":{const t=pt(e,"exclusive","boolean","");void 0!==t&&a.push(t);break}case"rating":{const t=pt(e,"maximum_score","number","");void 0!==t&&a.push(t)}{const t=pt(e,"hints","object","");if(void 0===t){if(null!==e.hints)if(Array.isArray(e.hints))for(const[l,n]of e.hints.entries())if(void 0===n)a.push(`.hints.[${l}] is an empty slot`);else{const e=typeof n;"string"!==e&&a.push(`.hints.[${l}] is not a string as expected but a ${e}`)}else a.push(".hints is not null but not an instance of Array")}else a.push(t)}}return a}const ft=D({__name:"DatasourceCreationEntrySetting",emits:["next","prev"],setup(e,{emit:t}){const{t:l}=Z.global,n=t,o=p(qe),i=le({included:!1,width:240,height:135}),s=le([]);function r(){return{name:"",sorting_method:Ke.Unset,optional:!1,type:"string",unique:!1,exclusive:!1,maximum_score:5,hints:Array.from({length:ot.maximum_score})}}function u(){const e=r();s.push({unique_id:crypto.randomUUID(),configuration:e})}function d(e,a,t){[e[a],e[t]]=[e[t],e[a]]}function c(e){void 0!==e&&(Array.isArray(e)?void 0!==e[0]&&c(e[0]):(async()=>{const a=await e.text(),t=JSON.parse(a),n=function(e){const a=[];if(null===e)return["configuration is null"];if("object"!=typeof e)return["configuration is not an object"];if(Object.getPrototypeOf(e)!==Object.prototype)return["configuration is not an plain object: nothing special, just { ... }"];if(void 0===e.entries)a.push(".entries is missing");else if(mt(e,"entries"))if(Array.isArray(e.entries))for(const[t,l]of e.entries.entries()){const e=vt(l).map(e=>`.entries.[${t}]: ${e}`);a.push(...e)}else a.push(".entries is not an array");else a.push(".entries is implemented by getter");if(void 0!==e.image_size)if(mt(e,"image_size"))for(const t of["width","height"]){const l=pt(e.image_size,t,"number",".image_size");void 0!==l&&a.push(l)}else a.push(".image_size is implemented by getter");return a.length>0?a:ct(e)}(t);if(n.length>0)return void o("error",l("datasource_creation.error.title"),n.join("\n"));const u=t;void 0===u.image_size?i.included=!1:(i.included=!0,i.height=u.image_size.height,i.width=u.image_size.width),s.splice(0);for(const e of u.entries){const a=r();"rating"===e.type&&(null===e.hints?e.hints=Array.from({length:ot.maximum_score}).fill(""):e.hints.push(...Array.from({length:ot.maximum_score-e.hints.length}).fill(""))),s.push({unique_id:crypto.randomUUID(),configuration:{...a,...e}})}})().catch(e=>{o("error",l("message.error.failed_to_import_reasons"),String(e))}))}const m=a(()=>{const e={image_size:i.included?{width:Number(i.width),height:Number(i.height)}:void 0,entries:[]};for(const{configuration:a}of s){const t={name:a.name.trim(),sorting_method:a.sorting_method,optional:a.optional},l=(()=>{switch(a.type){case"string":return{type:a.type,unique:a.unique};case"tag":return{type:a.type,exclusive:a.exclusive};case"rating":{const e=a.hints.slice(0,a.maximum_score).map(e=>e.trim());return{type:a.type,maximum_score:a.maximum_score,hints:e.some(e=>e.length>0)?e:null}}}})();e.entries.push({...t,...l})}return e}),v=a(()=>ct(m.value));function f(){n("next",m.value)}return(e,a)=>{const t=ut;return R(),J(C,null,[h(Ee,{class:"mb-8","prepend-icon":"mdi-arrow-left",onClick:a[0]||(a[0]=e=>n("prev"))},{default:O(()=>[ee(W(e.$t("action.back_to_last_step")),1)]),_:1}),h(De,{subtitle:e.$t("datasource_creation.entry_setting_detail"),title:e.$t("datasource_creation.entry_setting")},{default:O(()=>[h(Ne,null,{default:O(()=>[h(ca,{"filter-by-type":"application/json",hint:e.$t("datasource_creation.load_existing_configuration.hint"),label:e.$t("datasource_creation.load_existing_configuration.label"),"persistent-hint":"","onUpdate:modelValue":c},null,8,["hint","label"]),h(ra,null,{default:O(()=>[h(ze,null,{default:O(()=>[h(Ge,{modelValue:i.included,"onUpdate:modelValue":a[1]||(a[1]=e=>i.included=e),color:"primary",label:e.$t("datasource_creation.include_image")},null,8,["modelValue","label"]),i.included?(R(),q(Pe,{key:0,align:"center"},{default:O(()=>[h(ma,null,{default:O(()=>[h(oa,{modelValue:i.width,"onUpdate:modelValue":a[2]||(a[2]=e=>i.width=e),"hide-details":"",prefix:e.$t("datasource_creation.width"),suffix:e.$t("datasource_creation.pixel")},null,8,["modelValue","prefix","suffix"])]),_:1}),h(ma,{style:{"flex-grow":"0"}},{default:O(()=>[h(we,{icon:"mdi-circle-small"})]),_:1}),h(ma,null,{default:O(()=>[h(oa,{modelValue:i.height,"onUpdate:modelValue":a[3]||(a[3]=e=>i.height=e),"hide-details":"",prefix:e.$t("datasource_creation.height"),suffix:e.$t("datasource_creation.pixel")},null,8,["modelValue","prefix","suffix"])]),_:1})]),_:1})):K("",!0)]),_:1}),h(na,{class:"my-6"})]),_:1}),(R(!0),J(C,null,X(s,({unique_id:e},a)=>(R(),q(t,{key:e,modelValue:s[a].configuration,"onUpdate:modelValue":e=>s[a].configuration=e,index:a,total:s.length,onMoveDown:e=>function(e){d(s,e,e+1)}(a),onMoveUp:e=>function(e){d(s,e,e-1)}(a),onRemove:e=>function(e){s.splice(e,1)}(a)},null,8,["modelValue","onUpdate:modelValue","index","total","onMoveDown","onMoveUp","onRemove"]))),128)),h(Ee,{block:"","prepend-icon":"mdi-plus-thick",onClick:u},{default:O(()=>[ee(W(e.$t("datasource_creation.add_new_entry")),1)]),_:1})]),_:1})]),_:1},8,["subtitle","title"]),h(ze,{class:"mt-8"},{default:O(()=>[h(Pe,null,{default:O(()=>[h(ba),0===v.value.length?(R(),q(Ee,{key:0,"append-icon":"mdi-arrow-right",color:"primary",onClick:f},{default:O(()=>[ee(W(e.$t("action.continue_to_next_step")),1)]),_:1})):(R(),q(Ee,{key:1,color:"warning",onClick:a[4]||(a[4]=e=>H(o)("warning",H(l)("datasource_creation.error.title"),v.value.join("\n")))},{default:O(()=>[ee(W(e.$t("action.check")),1)]),_:1}))]),_:1})]),_:1})],64)}}}),_t=D({__name:"DatasourceCreationGeneralConfiguration",emits:["next","prev"],setup(e,{emit:a}){const t=a,l=i("");function n(){t("next",{name:l.value})}return(e,a)=>(R(),J(C,null,[h(Ee,{class:"mb-8","prepend-icon":"mdi-arrow-left",onClick:a[0]||(a[0]=e=>t("prev"))},{default:O(()=>[ee(W(e.$t("action.back_to_last_step")),1)]),_:1}),h(De,{title:e.$t("datasource_creation.general_configuration")},{default:O(()=>[h(Ne,null,{default:O(()=>[h(oa,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),label:e.$t("datasource_creation.datasource_name")},null,8,["modelValue","label"])]),_:1})]),_:1},8,["title"]),h(ze,{class:"mt-8"},{default:O(()=>[h(Pe,null,{default:O(()=>[h(ba),h(Ee,{"append-icon":"mdi-arrow-right",color:"primary",disabled:""===l.value,onClick:n},{default:O(()=>[ee(W(e.$t("action.continue_to_next_step")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],64))}});function bt(e){const a=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Array.from(a,e=>e.toString(16).toUpperCase().padStart(2,"0")).join(":")}const yt=D({__name:"DatasourceCreationKeysConfiguration",props:{disabled:{type:Boolean},argon2ParameterGetter:{type:Function}},emits:["finished"],setup(e,{emit:a}){const{t:t}=Z.global,l=p(qe),n=e,o=a,s=i(""),r=i(!1),u=i(""),d=i(""),c=i(!1);function m(){c.value=!0;const e=n.argon2ParameterGetter();if(null===e)return void(c.value=!1);const a=new Uint8Array(16);crypto.getRandomValues(a),u.value=bt(a);const i={...e,salt:a},r=new Uint8Array(32);crypto.getRandomValues(r);const m=(async()=>{const e=await crypto.subtle.digest("SHA-256",r);d.value=bt(new DataView(e))})(),p=(async()=>{const e=await ne(s.value,i);if(e.is_err())throw l("error",t("message.error.failed_to_argon2"),String(e.unwrap_error())),new Error("dummy");const{key:a}=e.unwrap(),n=new Uint8Array(12);crypto.getRandomValues(n);const o=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},a,r);return{raw_key:r,encrypted_key:new Uint8Array(o),key_nonce:n}})();Promise.all([m,p]).then(([e,t])=>{o("finished",{salt:a,encryption:t})}).finally(()=>{c.value=!1})}return(e,a)=>(R(),q(La,{disabled:n.disabled},{default:O(()=>[h(oa,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),"append-icon":r.value?"mdi-eye-off":"mdi-eye",label:e.$t("datasource_creation.password"),type:r.value?"text":"password",variant:"outlined","onClick:append":a[1]||(a[1]=e=>r.value=!r.value)},null,8,["modelValue","append-icon","label","type"]),h(Ee,{block:"",class:"mb-4",disabled:""===s.value,loading:c.value,"prepend-icon":"mdi-dice-multiple",onClick:m},{default:O(()=>[ee(W(e.$t("datasource_creation.generate_a_key")),1)]),_:1},8,["disabled","loading"]),h(oa,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),disabled:"",label:e.$t("datasource_creation.salt"),readonly:"",variant:"outlined"},null,8,["modelValue","label"]),h(oa,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=e=>d.value=e),disabled:"",label:e.$t("datasource_creation.key"),readonly:"",variant:"outlined"},null,8,["modelValue","label"])]),_:1},8,["disabled"]))}}),ht={class:"mx-auto",style:{"margin-top":"-8px"}},gt={class:"my-4"},xt={key:0,class:"mx-2"},Vt=D({__name:"DatasourceCreationArgon2ParametersProbing",emits:["finished"],setup(e,{emit:a}){const{t:t}=Z.global,l=a,n=p(qe),o=new TextEncoder,s=o.encode("password"),r=o.encode("somesalt"),u=i(1e3),d=Math.round(2040109465.6),c=i(!1),m=i(Math.round(d/1024/1024)),v=i(!1),f=i(1),_=i(!1),y=i(4),g=i(!1),x=oe({shown:!1,minimum:0,maximum:0,current_range:[0,0]}),V={memory:null,time:null,parallelism:null};function k(e){const a=t("datasource_creation.kdf_detail_control"),l=t("datasource_creation.kdf_memory");n("error",t("message.error.failed_to_argon2"),`${e}\n${t("message.error.failed_to_argon2_hint",{panel_name:a,field_name:l})}`)}function w(){g.value=!1,null!==V.memory&&null!==V.time&&null!==V.parallelism&&(m.value=Math.round(V.memory/1024/1024),f.value=V.time,y.value=V.parallelism,l("finished",{memory:V.memory,iterations:V.time,threads:V.parallelism}))}function S(){return V.time=null,V.memory=null,V.parallelism=null,{payload:s,salt:r,memory:c.value?1024*Number(m.value)*1024:d,parallelism:_.value?Number(y.value):4,hash_length:32}}return(e,a)=>(R(),J(C,null,[h(ze,null,{default:O(()=>[h(Pe,null,{default:O(()=>[h(Ia,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),color:"primary","hide-details":"",label:e.$t("datasource_creation.kdf_target_time"),max:16e3,min:10,step:1},{append:O(()=>[h(oa,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),density:"compact",style:{width:"128px"},suffix:"ms",type:"number"},null,8,["modelValue"])]),_:1},8,["modelValue","label"])]),_:1}),h(Pe,null,{default:O(()=>[b("div",ht,[h(ia,{variant:"text"},{default:O(()=>[ee(W(e.$t("datasource_creation.kdf_target_time_hint")),1)]),_:1}),h(ya,{inset:""},{activator:O(({props:a})=>[h(ia,$({color:"secondary",variant:"text"},a),{default:O(()=>[ee(W(e.$t("action.learn_more")),1)]),_:1},16)]),default:O(()=>[h(De,{class:"no-scroll-bar"},{default:O(()=>[h(Le,{style:{"text-align":"center"}},{default:O(()=>[ee(W(e.$t("datasource_creation.security.security_faqs")),1)]),_:1}),h(Ne,null,{default:O(()=>[(R(),J(C,null,X(["login_time","probing_time","online_security","access_by_third_party","implement_detail"],a=>h(De,{key:a},{default:O(()=>[h(Le,{class:"allow-wrapping"},{default:O(()=>[ee(W(e.$t(`datasource_creation.security.${a}.question`)),1)]),_:2},1024),h(Ne,null,{default:O(()=>[ee(W(e.$t(`datasource_creation.security.${a}.answer`)),1)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),h(Da,{class:"my-2"},{default:O(()=>[h(za,{title:e.$t("datasource_creation.kdf_detail_control")},{default:O(()=>[h(Ea,null,{default:O(()=>[h(ze,null,{default:O(()=>[h(Pe,{justify:"space-between"},{default:O(()=>[h(ma,{cols:"1"},{default:O(()=>[h(Ge,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value=e),color:"primary"},null,8,["modelValue"])]),_:1}),h(ma,{cols:"11"},{default:O(()=>[h(oa,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=e=>m.value=e),disabled:!c.value,label:e.$t("datasource_creation.kdf_memory"),suffix:"MiB",type:"number"},null,8,["modelValue","disabled","label"])]),_:1})]),_:1}),h(Pe,{justify:"space-between"},{default:O(()=>[h(ma,{cols:"1"},{default:O(()=>[h(Ge,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=e=>v.value=e),color:"primary"},null,8,["modelValue"])]),_:1}),h(ma,{cols:"11"},{default:O(()=>[h(oa,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=e=>f.value=e),disabled:!v.value,hint:e.$t("datasource_creation.kdf_iteration_hint"),label:e.$t("datasource_creation.kdf_iteration"),type:"number"},null,8,["modelValue","disabled","hint","label"])]),_:1})]),_:1}),h(Pe,{justify:"space-between"},{default:O(()=>[h(ma,{cols:"1"},{default:O(()=>[h(Ge,{modelValue:_.value,"onUpdate:modelValue":a[6]||(a[6]=e=>_.value=e),color:"primary"},null,8,["modelValue"])]),_:1}),h(ma,{cols:"11"},{default:O(()=>[h(oa,{modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value=e),disabled:!_.value,label:e.$t("datasource_creation.kdf_threads"),type:"number"},null,8,["modelValue","disabled","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),b("div",gt,[h(Ee,{block:"",color:"primary",loading:g.value,onClick:a[8]||(a[8]=e=>v.value?function(){g.value=!0;const e=Number(f.value),a=S(),{promise:t}=ie({...a,time:e});t.then(t=>{t.is_ok()?(V.time=e,V.memory=a.memory,V.parallelism=a.parallelism):k(t.unwrap_error()),w()})}():function(){g.value=!0;const e=S(),a=Math.round(Number(u.value)+.1*Number(u.value));(async()=>{let t=1,l=-100;for(x.minimum=t,x.maximum=-l,x.current_range=[t,-l],x.shown=!0;l<0||t<l-1;){const n=l<0?-l:Math.floor((t+l)/2),{promise:o,canceler:i}=ie({...e,time:n}),s=setTimeout(i,a),r=await o;if(clearTimeout(s),r.is_err())return k(r.unwrap_error()),null;r.unwrap().length>0?(t=n,l<0?(l*=2,x.maximum=-l,x.current_range=[t,-l]):x.current_range=[t,l]):(l=n,x.current_range=[t,l])}return Math.floor((t+l)/2)})().then(a=>{x.shown=!1,null!==a&&0!==a&&(V.time=a,V.memory=e.memory,V.parallelism=e.parallelism),w()})}())},{loader:O(()=>[h(Re,{indeterminate:""}),v.value?K("",!0):(R(),J("span",xt,W(e.$t("message.time_taking_action")),1))]),default:O(()=>[ee(W(v.value?e.$t("datasource_creation.validate_argon2_parameters"):e.$t("datasource_creation.probe_argon2_parameters"))+" ",1)]),_:1},8,["loading"]),H(x).shown?(R(),q(Ra,{key:0,modelValue:H(x).current_range,"onUpdate:modelValue":a[9]||(a[9]=e=>H(x).current_range=e),disabled:"",max:H(x).maximum,min:H(x).minimum,"thumb-size":"12"},null,8,["modelValue","max","min"])):K("",!0)])],64))}}),kt=D({__name:"DatasourceCreationSecuritySetup",emits:["next","prev"],setup(e,{emit:t}){const l=t;let n=null,o=null,s=null;const r=i(!1),u=i(!1),d=i(!1);function c(e){null!==e&&(n=e,r.value=!0,d.value=!1)}function m(e){o=e.salt,s=e.encryption,u.value=!0,d.value=!0}function p(){if(null===n||null===o||null===s)return;const e={argon2:{...n,salt:o},data_encryption:s};l("next",e)}const v=a(()=>r.value&&u.value&&d.value);return(e,a)=>{const t=Vt,o=yt;return R(),J(C,null,[h(Ee,{class:"mb-8","prepend-icon":"mdi-arrow-left",onClick:a[0]||(a[0]=e=>l("prev"))},{default:O(()=>[ee(W(e.$t("action.back_to_last_step")),1)]),_:1}),h(De,{subtitle:e.$t("datasource_creation.security_setup_detail"),title:e.$t("datasource_creation.security_setup")},{default:O(()=>[h(Ne,null,{default:O(()=>[h(t,{onFinished:c}),h(o,{"argon2-parameter-getter":()=>H(n),disabled:!r.value,onFinished:m},null,8,["argon2-parameter-getter","disabled"])]),_:1})]),_:1},8,["subtitle","title"]),h(ze,{class:"mt-8"},{default:O(()=>[h(Pe,null,{default:O(()=>[h(ba),h(Ee,{"append-icon":"mdi-arrow-right",color:"primary",disabled:!v.value,onClick:p},{default:O(()=>[ee(W(e.$t("action.continue_to_next_step")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],64)}}}),wt={class:"text-h5 mb-6"},St={class:"mb-4 text-medium-emphasis text-body-2"},$t=D({__name:"DatasourceCreationWelcome",emits:["next"],setup(e,{emit:a}){const t=a;return(e,a)=>(R(),J(C,null,[h(Ee,{class:"mb-8","prepend-icon":"mdi-arrow-left",to:"/"},{default:O(()=>[ee(W(e.$t("action.back_to_last_step")),1)]),_:1}),h(ra,{class:"pa-4 text-center mx-auto"},{default:O(()=>[b("h2",wt,W(e.$t("datasource_creation.welcome")),1),b("p",St,W(e.$t("datasource_creation.welcome_detail")),1)]),_:1}),h(ze,{class:"mt-8"},{default:O(()=>[h(Pe,null,{default:O(()=>[h(ba),h(Ee,{"append-icon":"mdi-arrow-right",color:"primary",onClick:a[0]||(a[0]=e=>t("next"))},{default:O(()=>[ee(W(e.$t("action.start")),1)]),_:1})]),_:1})]),_:1})],64))}}),Ct={class:"text-h5 mb-6"},At={class:"mb-4 text-medium-emphasis text-body-2"},It=D({__name:"DatasourceCreation",setup(e){const{mobile:a}=j(),t=i(0);let l=null;function n(e){l=e,t.value+=1}let o=null;function s(e){o=e,t.value+=1}const r=i(!0),u=i(!1);let d=null;async function c(){if(null===l||null===o||null===p)return null;const e=new se,a=new re(e,{compressionMethod:0,level:0,zip64:!0});await a.add(o.name,void 0,{directory:!0});const t={runtime:{protection:{encrypted_key:l.data_encryption.encrypted_key,argon2:l.argon2,key:await ue(l.data_encryption.raw_key,{encrypt:!0}),key_nonce:l.data_encryption.key_nonce}},protection:{encrypted_counter:0},configurations:{global:o,entry:p},data:new Map},n=await de(t,t.runtime.protection.key);await a.add(`${o.name}/data.json`,new ce(n)),await a.close(),d=await e.getData(),r.value=!1}function m(){const e=()=>{null!==d&&(me(d,"database.zip"),u.value=!0)};null===d?c().then(()=>{e()}):e()}let p=null;function v(e){p=e,t.value+=1,c()}return(e,l)=>{const o=$t,i=kt,d=_t,c=ft;return R(),q(ze,{class:"fill-height"},{default:O(()=>[h(Pe,{justify:"center"},{default:O(()=>[h(lt,{modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=e=>t.value=e),"alt-labels":"","hide-actions":"",items:[e.$t("datasource_creation.welcome"),e.$t("datasource_creation.security_setup"),e.$t("datasource_creation.general_configuration"),e.$t("datasource_creation.entry_setting"),e.$t("datasource_creation.summary_and_done")],mobile:H(a),width:"100%"},{"item.1":O(()=>[h(o,{onNext:l[0]||(l[0]=e=>t.value+=1)})]),"item.2":O(()=>[h(i,{onNext:n,onPrev:l[1]||(l[1]=e=>t.value-=1)})]),"item.3":O(()=>[h(d,{onNext:s,onPrev:l[2]||(l[2]=e=>t.value-=1)})]),"item.4":O(()=>[h(c,{onNext:v,onPrev:l[3]||(l[3]=e=>t.value-=1)})]),"item.5":O(()=>[h(ra,{class:"pa-4 text-center mx-auto"},{default:O(()=>[h(we,{class:"mb-5",color:"success",icon:"mdi-check-circle",size:"112"}),b("h2",Ct,W(e.$t("datasource_creation.summary_and_done")),1),b("p",At,W(e.$t("datasource_creation.summary_and_done_detail")),1)]),_:1}),h(ze,{class:"mt-8"},{default:O(()=>[h(Pe,{class:"mb-2"},{default:O(()=>[h(ba),h(Ee,{color:"primary",loading:r.value,"prepend-icon":"mdi-download",onClick:m},{default:O(()=>[ee(W(e.$t("action.download_full_database")),1)]),_:1},8,["loading"]),h(ba)]),_:1}),u.value?(R(),q(Pe,{key:0,class:"mt-2"},{default:O(()=>[h(ba),h(Ee,{color:"success","prepend-icon":"mdi-check",to:"/"},{default:O(()=>[ee(W(e.$t("action.done")),1)]),_:1}),h(ba)]),_:1})):K("",!0)]),_:1})]),_:1},8,["modelValue","items","mobile"])]),_:1})]),_:1})}}}),Tt=D({__name:"NewDatasource",setup:e=>(e,a)=>{const t=It;return R(),q(t)}});export{Tt as default};
