import{at as e,au as t,g as a,p as l,M as n,r as o,w as s,av as r,as as i,c as d,d as u,x as c,F as p,e as m,Q as g,ar as f,R as v,aw as y,h,f as _,ax as b,N as x,ay as k,E as w,ap as S,aq as P,n as V,t as I,y as $,az as B,L as F,B as C,aA as T,aB as D,a as E,m as O,j as A,a7 as N,aC as j,a5 as G,s as R,l as z,o as H,q as U,v as L,H as W,ag as M,A as q,K,D as J,W as Q,Y,am as Z,aD as X,Z as ee,ao as te,G as ae,aE as le,z as ne,aF as oe,a3 as se,aG as re,aH as ie,aI as de,aJ as ue,aK as ce,a2 as pe,aL as me}from"./index-X2pssZTS.js";import{T as ge,h as fe,U as ve,u as ye,L as he,W as _e,Q as be,E as xe,O as ke,m as we,V as Se,i as Pe,k as Ve,j as Ie,v as $e,q as Be,g as Fe,l as Ce,x as Te}from"./ssrBoot-BJN1Wy2u.js";import{a as De,V as Ee}from"./VTooltip-C_gWb3ji.js";import{_ as Oe}from"./internal_plugin-vue_export-helper-BCo6x5W8.js";import{V as Ae}from"./VCol-DQQf74-R.js";import{s as Ne,r as je,t as Ge,v as Re,w as ze,x as He,o as Ue,q as Le,k as We,l as Me,m as qe,n as Ke,y as Je,c as Qe,a as Ye,u as Ze,j as Xe,p as et,b as tt,d as at,e as lt,f as nt,g as ot,h as st,i as rt,V as it}from"./VPagination-BUgAA66X.js";import{V as dt,h as ut,j as ct,b as pt,u as mt,k as gt,m as ft,a as vt}from"./VSelect-LIMe1IgN.js";import{V as yt,a as ht,b as _t}from"./VWindowItem-DBSrxN_5.js";import"./en-DEkKOPRf.js";function bt(a,l,n){return Object.keys(a).filter(t=>e(t)&&t.endsWith(l)).reduce((e,o)=>(e[o.slice(0,-l.length)]=e=>t(a[o],e,n(e)),e),{})}const xt=l({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),kt=a()({name:"VConfirmEdit",props:xt(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:a,slots:l}=t;const f=n(e,"modelValue"),v=o();s(()=>{v.value=structuredClone(r(f.value))});const{t:y}=i(),h=d(()=>ge(f.value,v.value));function _(t){return"boolean"==typeof e.disabled?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(t):h.value}const b=d(()=>_("save")),x=d(()=>_("cancel"));function k(){f.value=v.value,a("save",v.value)}function w(){v.value=structuredClone(r(f.value)),a("cancel")}function S(t){return c(p,null,[m(fe,g({disabled:x.value,variant:"text",color:e.color,onClick:w,text:y(e.cancelText)},t),null),m(fe,g({disabled:b.value,variant:"text",color:e.color,onClick:k,text:y(e.okText)},t),null)])}let P=!1;return u(()=>c(p,null,[l.default?.({model:v,save:k,cancel:w,isPristine:h.value,get actions(){return P=!0,S}}),!e.hideActions&&!P&&S()])),{save:k,cancel:w,isPristine:h}}}),wt=l({color:String,prevIcon:{type:f,default:"$prev"},nextIcon:{type:f,default:"$next"},firstIcon:{type:f,default:"$first"},lastIcon:{type:f,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),St=a()({name:"VDataTableFooter",props:wt(),setup(e,t){let{slots:a}=t;const{t:l}=i(),{page:n,pageCount:o,startIndex:s,stopIndex:r,itemsLength:p,itemsPerPage:f,setItemsPerPage:y}=Ne(),h=d(()=>e.itemsPerPageOptions.map(e=>"number"==typeof e?{value:e,title:-1===e?l("$vuetify.dataFooter.itemsPerPageAll"):String(e)}:{...e,title:isNaN(Number(e.title))?l(e.title):e.title}));return u(()=>{const t=je.filterProps(e);return c("div",{class:"v-data-table-footer"},[a.prepend?.(),c("div",{class:"v-data-table-footer__items-per-page"},[c("span",null,[l(e.itemsPerPageText)]),m(dt,{items:h.value,itemColor:e.color,modelValue:f.value,"onUpdate:modelValue":e=>y(Number(e)),density:"compact",variant:"outlined","aria-label":l(e.itemsPerPageText),hideDetails:!0},null)]),c("div",{class:"v-data-table-footer__info"},[c("div",null,[l(e.pageText,p.value?s.value+1:0,r.value,p.value)])]),c("div",{class:"v-data-table-footer__pagination"},[m(je,g({modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:o.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},v(t,["color"])),null)])])}),{}}}),Pt=y({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:a}=t;const l=e.tag??"td",n="string"==typeof e.fixed?e.fixed:e.fixed?"start":"none";return m(l,{class:_(["v-data-table__td",{"v-data-table-column--fixed":"start"===n,"v-data-table-column--fixed-end":"end"===n,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:h(e.height),width:h(e.width),maxWidth:h(e.maxWidth),left:"start"===n?h(e.fixedOffset||null):void 0,right:"end"===n?h(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?h(e.indent):void 0}},{default:()=>[a.default?.()]})}),Vt=l({headers:Array},"DataTable-header"),It=Symbol.for("vuetify:data-table-headers"),$t={title:"",sortable:!1},Bt={...$t,width:48};function Ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.children)for(const a of e.children)Ft(a,t);else t.push(e);return t}function Ct(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const a of e)a.key&&t.add(a.key),a.children&&Ct(a.children,t);return t}function Tt(e){if(e.key)return"data-table-group"===e.key?$t:["data-table-expand","data-table-select"].includes(e.key)?Bt:void 0}function Dt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?Math.max(t,...e.children.map(e=>Dt(e,t+1))):t}function Et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const a of e.children)t=Et(a,t)}else e.fixed&&"end"!==e.fixed&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function Ot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const a of e.children)t=Ot(a,t)}else"end"===e.fixed&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function At(e,t){const a=[];let l=0;const n=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({element:e,priority:0}));return{enqueue:(t,a)=>{let l=!1;for(let n=0;n<e.length;n++)if(e[n].priority>a){e.splice(n,0,{element:t,priority:a}),l=!0;break}l||e.push({element:t,priority:a})},size:()=>e.length,count:()=>{let t=0;if(!e.length)return 0;const a=Math.floor(e[0].priority);for(let l=0;l<e.length;l++)Math.floor(e[l].priority)===a&&(t+=1);return t},dequeue:()=>e.shift()}}(e);for(;n.size()>0;){let e=n.count();const o=[];let s=1;for(;e>0;){const{element:a,priority:r}=n.dequeue(),i=t-l-Dt(a);if(o.push({...a,rowspan:i??1,colspan:a.children?Ft(a).length:1}),a.children)for(const e of a.children){const t=r%1+s/Math.pow(10,l+2);n.enqueue(e,l+i+t)}s+=1,e-=1}l+=1,a.push(o)}return{columns:e.map(e=>Ft(e)).flat(),headers:a}}function Nt(e){const t=[];for(const a of e){const e={...Tt(a),...a},l=e.key??("string"==typeof e.value?e.value:null),n=e.value??l??null,o={...e,key:l,value:n,sortable:e.sortable??(null!=e.key||!!e.sort),children:e.children?Nt(e.children):void 0};t.push(o)}return t}function jt(e,t){const a=o([]),l=o([]),n=o({}),r=o({}),i=o({});s(()=>{const o=(e.headers||Object.keys(e.items[0]??{}).map(e=>({key:e,title:b(e)}))).slice(),s=Ct(o);t?.groupBy?.value.length&&!s.has("data-table-group")&&o.unshift({key:"data-table-group",title:"Group"}),t?.showSelect?.value&&!s.has("data-table-select")&&o.unshift({key:"data-table-select"}),t?.showExpand?.value&&!s.has("data-table-expand")&&o.push({key:"data-table-expand"});const d=Nt(o);!function(e){let t=!1;function a(e,l){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";if(e)if("none"!==n&&(e.fixed=n),!0===e.fixed&&(e.fixed="start"),e.fixed===l)if(e.children)if("start"===l)for(let t=e.children.length-1;t>=0;t--)a(e.children[t],l,l);else for(let t=0;t<e.children.length;t++)a(e.children[t],l,l);else t||"start"!==l?t||"end"!==l?isNaN(Number(e.width))?k(`Multiple fixed columns should have a static width (key: ${e.key})`):e.minWidth=Math.max(Number(e.width)||0,Number(e.minWidth)||0):e.firstFixedEnd=!0:e.lastFixed=!0,t=!0;else if(e.children)if("start"===l)for(let t=e.children.length-1;t>=0;t--)a(e.children[t],l);else for(let t=0;t<e.children.length;t++)a(e.children[t],l);else t=!1}for(let o=e.length-1;o>=0;o--)a(e[o],"start");for(let o=0;o<e.length;o++)a(e[o],"end");let l=0;for(let o=0;o<e.length;o++)l=Et(e[o],l);let n=0;for(let o=e.length-1;o>=0;o--)n=Ot(e[o],n)}(d);const u=Math.max(...d.map(e=>Dt(e)))+1,c=At(d,u);a.value=c.headers,l.value=c.columns;const p=c.headers.flat(1);for(const e of p)e.key&&(e.sortable&&(e.sort&&(n.value[e.key]=e.sort),e.sortRaw&&(r.value[e.key]=e.sortRaw)),e.filter&&(i.value[e.key]=e.filter))});const d={headers:a,columns:l,sortFunctions:n,sortRawFunctions:r,filterFunctions:i};return w(It,d),d}function Gt(){const e=x(It);if(!e)throw new Error("Missing headers!");return e}const Rt=l({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,initialSortOrder:String,sortAscIcon:{type:f,default:"$sortAsc"},sortDescIcon:{type:f,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...be(),...P(),..._e()},"VDataTableHeaders"),zt=a()({name:"VDataTableHeaders",props:Rt(),setup(e,t){let{slots:a}=t;const{t:l}=i(),{toggleSort:n,sortBy:o,isSorted:s}=Ge(),{someSelected:r,allSelected:f,selectAll:v,showSelectAll:y}=Re(),{columns:b,headers:x}=Gt(),{loaderClasses:k}=ve(e);function w(t,a){if(!e.sticky&&!e.fixedHeader&&!t.fixed)return;const l="string"==typeof t.fixed?t.fixed:t.fixed?"start":"none";return{position:"sticky",left:"start"===l?h(t.fixedOffset):void 0,right:"end"===l?h(t.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${a})`:void 0}}function P(t){const a=o.value.find(e=>e.key===t.key);return!a&&"asc"===e.initialSortOrder||"asc"===a?.order?e.sortAscIcon:e.sortDescIcon}const{backgroundColorClasses:I,backgroundColorStyles:$}=ye(()=>e.color),{displayClasses:B,mobile:F}=S(e),C=d(()=>({headers:x.value,columns:b.value,toggleSort:n,isSorted:s,sortBy:o.value,someSelected:r.value,allSelected:f.value,selectAll:v,getSortIcon:P})),T=d(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},B.value,k.value]),D=t=>{let{column:l,x:i,y:d}=t;const u="data-table-select"===l.key||"data-table-expand"===l.key,p="data-table-group"===l.key&&0===l.width&&!l.title,b=g(e.headerProps??{},l.headerProps??{});return m(Pt,g({tag:"th",align:l.align,class:[{"v-data-table__th--sortable":l.sortable&&!e.disableSort,"v-data-table__th--sorted":s(l),"v-data-table__th--fixed":l.fixed},...T.value],style:{width:h(l.width),minWidth:h(l.minWidth),maxWidth:h(l.maxWidth),...w(l,d)},colspan:l.colspan,rowspan:l.rowspan,fixed:l.fixed,nowrap:l.nowrap,lastFixed:l.lastFixed,firstFixedEnd:l.firstFixedEnd,noPadding:u,empty:p,tabindex:l.sortable?0:void 0,onClick:l.sortable?e=>n(l,e):void 0,onKeydown:l.sortable?t=>function(t,a){"Enter"!==t.key||e.disableSort||n(a,t)}(t,l):void 0},b),{default:()=>{const t=`header.${l.key}`,i={column:l,selectAll:v,isSorted:s,toggleSort:n,sortBy:o.value,someSelected:r.value,allSelected:f.value,getSortIcon:P};return a[t]?a[t](i):p?"":"data-table-select"===l.key?a["header.data-table-select"]?.(i)??(y.value&&m(ct,{color:e.color,density:e.density,modelValue:f.value,indeterminate:r.value&&!f.value,"onUpdate:modelValue":v},null)):c("div",{class:"v-data-table-header__content"},[c("span",null,[l.title]),l.sortable&&!e.disableSort&&m(xe,{key:"icon",class:"v-data-table-header__sort-icon",icon:P(l)},null),e.multiSort&&s(l)&&c("div",{key:"badge",class:_(["v-data-table-header__sort-badge",...I.value]),style:V($.value)},[o.value.findIndex(e=>e.key===l.key)+1])])}})},E=()=>{const t=d(()=>b.value.filter(t=>t?.sortable&&!e.disableSort)),a=b.value.find(e=>"data-table-select"===e.key);return m(Pt,g({tag:"th",class:[...T.value],colspan:x.value.length+1},e.headerProps),{default:()=>[c("div",{class:"v-data-table-header__content"},[m(dt,{chips:!0,color:e.color,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:t.value,label:l("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>o.value=[]},{append:a?()=>m(ct,{color:e.color,density:"compact",modelValue:f.value,indeterminate:r.value&&!f.value,"onUpdate:modelValue":()=>v(!f.value)},null):void 0,chip:e=>m(ut,{onClick:e.item.raw?.sortable?()=>n(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,m(xe,{class:_(["v-data-table__td-sort-icon",s(e.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:P(e.item.raw),size:"small"},null)]})})])]})};u(()=>F.value?c("tr",null,[m(E,null,null)]):c(p,null,[a.headers?a.headers(C.value):x.value.map((e,t)=>c("tr",null,[e.map((e,a)=>m(D,{column:e,x:a,y:t},null))])),e.loading&&c("tr",{class:"v-data-table-progress"},[c("th",{colspan:b.value.length},[m(he,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"==typeof e.loading||"true"===e.loading?e.color:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),Ht=l({item:{type:Object,required:!0},groupCollapseIcon:{type:f,default:"$tableGroupCollapse"},groupExpandIcon:{type:f,default:"$tableGroupExpand"},...be()},"VDataTableGroupHeaderRow"),Ut=a()({name:"VDataTableGroupHeaderRow",props:Ht(),setup(e,t){let{slots:a}=t;const{isGroupOpen:l,toggleGroup:n,extractRows:o}=ze(),{isSelected:s,isSomeSelected:r,select:i}=Re(),{columns:u}=Gt(),p=d(()=>o([e.item])),g=I(()=>u.value.length-(u.value.some(e=>"data-table-select"===e.key)?1:0));return()=>c("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(t=>{if("data-table-group"===t.key){const t=l(e.item)?e.groupCollapseIcon:e.groupExpandIcon,o=()=>n(e.item);return a["data-table-group"]?.({item:e.item,count:p.value.length,props:{icon:t,onClick:o}})??m(Pt,{class:"v-data-table-group-header-row__column",colspan:g.value},{default:()=>[m(fe,{size:"small",variant:"text",icon:t,onClick:o},null),c("span",null,[e.item.value]),c("span",null,[$("("),p.value.length,$(")")])]})}if("data-table-select"===t.key){const t=p.value.filter(e=>e.selectable),l=t.length>0&&s(t),n=r(t)&&!l,o=e=>i(t,e);return a["data-table-select"]?.({props:{modelValue:l,indeterminate:n,"onUpdate:modelValue":o}})??m(Pt,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[m(ct,{density:e.density,disabled:0===t.length,modelValue:l,indeterminate:n,"onUpdate:modelValue":o},null)]})}return""})])}}),Lt=l({color:String,index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:f,default:"$collapse"},expandIcon:{type:f,default:"$expand"},onClick:T(),onContextmenu:T(),onDblclick:T(),...be(),...P()},"VDataTableRow"),Wt=a()({name:"VDataTableRow",props:Lt(),setup(e,t){let{slots:a}=t;const{displayClasses:l,mobile:n}=S(e,"v-data-table__tr"),{isSelected:o,toggleSelect:s,someSelected:r,allSelected:i,selectAll:d}=Re(),{isExpanded:f,toggleExpand:v}=He(),{toggleSort:y,sortBy:h,isSorted:b}=Ge(),{columns:x}=Gt();u(()=>c("tr",{class:_(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},l.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&x.value.map((t,l)=>{const u=e.item,_=`item.${t.key}`,x=`header.${t.key}`,k={index:e.index,item:u.raw,internalItem:u,value:B(u.columns,t.key),column:t,isSelected:o,toggleSelect:s,isExpanded:f,toggleExpand:v},w={column:t,selectAll:d,isSorted:b,toggleSort:y,sortBy:h.value,someSelected:r.value,allSelected:i.value,getSortIcon:()=>""},S="function"==typeof e.cellProps?e.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value,column:t}):e.cellProps,P="function"==typeof t.cellProps?t.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value}):t.cellProps,V="data-table-select"===t.key||"data-table-expand"===t.key,I="data-table-group"===t.key&&0===t.width&&!t.title;return m(Pt,g({align:t.align,indent:t.indent,class:{"v-data-table__td--expanded-row":"data-table-expand"===t.key,"v-data-table__td--select-row":"data-table-select"===t.key},fixed:t.fixed,fixedOffset:t.fixedOffset,fixedEndOffset:t.fixedEndOffset,lastFixed:t.lastFixed,firstFixedEnd:t.firstFixedEnd,maxWidth:n.value?void 0:t.maxWidth,noPadding:V,empty:I,nowrap:t.nowrap,width:n.value?void 0:t.width},S,P),{default:()=>{if("data-table-select"===t.key)return a["item.data-table-select"]?.({...k,props:{color:e.color,disabled:!u.selectable,modelValue:o([u]),onClick:F(()=>s(u),["stop"])}})??m(ct,{color:e.color,disabled:!u.selectable,density:e.density,modelValue:o([u]),onClick:F(t=>s(u,e.index,t),["stop"])},null);if("data-table-expand"===t.key)return a["item.data-table-expand"]?.({...k,props:{icon:f(u)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:F(()=>v(u),["stop"])}})??m(fe,{icon:f(u)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:F(()=>v(u),["stop"])},null);if(a[_]&&!n.value)return a[_](k);const l=C(k.value);return n.value?c(p,null,[c("div",{class:"v-data-table__td-title"},[a[x]?.(w)??t.title]),c("div",{class:"v-data-table__td-value"},[a[_]?.(k)??l])]):l}})})]))}}),Mt=l({color:String,loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...D(Lt(),["collapseIcon","expandIcon","density"]),...D(Ht(),["groupCollapseIcon","groupExpandIcon","density"]),...P()},"VDataTableRows"),qt=a()({name:"VDataTableRows",inheritAttrs:!1,props:Mt(),setup(e,t){let{attrs:a,slots:l}=t;const{columns:n}=Gt(),{expandOnClick:o,toggleExpand:s,isExpanded:r}=He(),{isSelected:d,toggleSelect:f}=Re(),{toggleGroup:v,isGroupOpen:y}=ze(),{t:h}=i(),{mobile:_}=S(e);return u(()=>{const t=D(e,["groupCollapseIcon","groupExpandIcon","density"]);return!e.loading||e.items.length&&!l.loading?e.loading||e.items.length||e.hideNoData?c(p,null,[e.items.map((i,u)=>{if("group"===i.type){const e={index:u,item:i,columns:n.value,isExpanded:r,toggleExpand:s,isSelected:d,toggleSelect:f,toggleGroup:v,isGroupOpen:y};return l["group-header"]?l["group-header"](e):m(Ut,g({key:`group-header_${i.id}`,item:i},bt(a,":groupHeader",()=>e),t),l)}if("group-summary"===i.type){const e={index:u,item:i,columns:n.value,toggleGroup:v};return l["group-summary"]?.(e)??""}const h={index:i.virtualIndex??u,item:i.raw,internalItem:i,columns:n.value,isExpanded:r,toggleExpand:s,isSelected:d,toggleSelect:f},b={...h,props:g({key:`item_${i.key??i.index}`,onClick:o.value?()=>{s(i)}:void 0,index:u,item:i,color:e.color,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:_.value},bt(a,":row",()=>h),"function"==typeof e.rowProps?e.rowProps({item:h.item,index:h.index,internalItem:h.internalItem}):e.rowProps)};return c(p,{key:b.props.key},[l.item?l.item(b):m(Wt,b.props,l),r(i)&&l["expanded-row"]?.(h)])})]):c("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[c("td",{colspan:n.value.length},[l["no-data"]?.()??h(e.noDataText)])]):c("tr",{class:"v-data-table-rows-loading",key:"loading"},[c("td",{colspan:n.value.length},[l.loading?.()??h(e.loadingText)])])}),{}}}),Kt=l({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...A(),...be(),...we(),...O()},"VTable"),Jt=a()({name:"VTable",props:Kt(),setup(e,t){let{slots:a,emit:l}=t;const{themeClasses:n}=E(e),{densityClasses:o}=ke(e);return u(()=>m(e.tag,{class:_(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!a.top,"v-table--has-bottom":!!a.bottom,"v-table--hover":e.hover,"v-table--striped-even":"even"===e.striped,"v-table--striped-odd":"odd"===e.striped},n.value,o.value,e.class]),style:V(e.style)},{default:()=>[a.top?.(),a.default?c("div",{class:"v-table__wrapper",style:{height:h(e.height)}},[c("table",null,[a.default()])]):a.wrapper?.(),a.bottom?.()]})),{}}}),Qt=l({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function Yt(e,t,a){return t.map((t,l)=>function(e,t,a,l){const n=e.returnObject?t:N(t,e.itemValue),o=N(t,e.itemSelectable,!0),s=l.reduce((e,a)=>(null!=a.key&&(e[a.key]=N(t,a.value)),e),{});return{type:"item",key:e.returnObject?N(t,e.itemValue):n,index:a,value:n,selectable:o,columns:s,raw:t}}(e,t,l,a))}function Zt(e,t){return{items:d(()=>Yt(e,e.items,t.value))}}const Xt=l({...Mt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Me(),...We(),...Vt(),...Qt(),...Le(),...Ue(),...v(Rt(),["multiSort","initialSortOrder"]),...Kt()},"DataTable"),ea=l({...Ke(),...Xt(),...qe(),...wt()},"VDataTable");a()({name:"VDataTable",props:ea(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=Je(e),{initialSortOrder:o,sortBy:s,multiSort:r,mustSort:i}=Qe(e),{page:f,itemsPerPage:y}=Ye(e),{disableSort:h}=j(e),{columns:_,headers:b,sortFunctions:x,sortRawFunctions:k,filterFunctions:w}=jt(e,{groupBy:n,showSelect:I(()=>e.showSelect),showExpand:I(()=>e.showExpand)}),{items:S}=Zt(e,_),P=I(()=>e.search),{filteredItems:V}=Ze(e,S,P,{transform:e=>e.columns,customKeyFilter:w}),{toggleSort:$}=Xe({initialSortOrder:o,sortBy:s,multiSort:r,mustSort:i,page:f}),{sortByWithGroups:B,opened:F,extractRows:C,isGroupOpen:T,toggleGroup:D}=et({groupBy:n,sortBy:s,disableSort:h}),{sortedItems:E}=tt(e,V,B,{transform:e=>({...e.raw,...e.columns}),sortFunctions:x,sortRawFunctions:k}),{flatItems:O}=at(E,n,F,()=>!!l["group-summary"]),A=d(()=>O.value.length),{startIndex:N,stopIndex:R,pageCount:z,setItemsPerPage:H}=lt({page:f,itemsPerPage:y,itemsLength:A}),{paginatedItems:U}=nt({items:O,startIndex:N,stopIndex:R,itemsPerPage:y}),L=d(()=>C(U.value)),{isSelected:W,select:M,selectAll:q,toggleSelect:K,someSelected:J,allSelected:Q}=ot(e,{allItems:S,currentPage:L}),{isExpanded:Y,toggleExpand:Z}=st(e);rt({page:f,itemsPerPage:y,sortBy:s,groupBy:n,search:P}),G({VDataTableRows:{hideNoData:I(()=>e.hideNoData),noDataText:I(()=>e.noDataText),loading:I(()=>e.loading),loadingText:I(()=>e.loadingText)}});const X=d(()=>({page:f.value,itemsPerPage:y.value,sortBy:s.value,pageCount:z.value,toggleSort:$,setItemsPerPage:H,someSelected:J.value,allSelected:Q.value,isSelected:W,select:M,selectAll:q,toggleSelect:K,isExpanded:Y,toggleExpand:Z,isGroupOpen:T,toggleGroup:D,items:L.value.map(e=>e.raw),internalItems:L.value,groupedItems:U.value,columns:_.value,headers:b.value}));return u(()=>{const t=St.filterProps(e),n=zt.filterProps(v(e,["multiSort"])),o=qt.filterProps(e),s=Jt.filterProps(e);return m(Jt,g({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},s,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.(X.value),default:()=>l.default?l.default(X.value):c(p,null,[l.colgroup?.(X.value),!e.hideDefaultHeader&&c("thead",{key:"thead"},[m(zt,g(n,{multiSort:!!e.multiSort}),l)]),l.thead?.(X.value),!e.hideDefaultBody&&c("tbody",null,[l["body.prepend"]?.(X.value),l.body?l.body(X.value):m(qt,g(a,o,{items:U.value}),l),l["body.append"]?.(X.value)]),l.tbody?.(X.value),l.tfoot?.(X.value)]),bottom:()=>l.bottom?l.bottom(X.value):!e.hideDefaultFooter&&c(p,null,[m(pt,null,null),m(St,t,{prepend:l["footer.prepend"]})])})}),{}}});const ta=l({...v(Xt(),["hideDefaultFooter"]),...We(),...ft(),...qe()},"VDataTableVirtual"),aa=a()({name:"VDataTableVirtual",props:ta(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:a,slots:l}=t;const{groupBy:n}=Je(e),{initialSortOrder:o,sortBy:s,multiSort:r,mustSort:i}=Qe(e),{disableSort:p}=j(e),{columns:f,headers:y,filterFunctions:_,sortFunctions:b,sortRawFunctions:x}=jt(e,{groupBy:n,showSelect:I(()=>e.showSelect),showExpand:I(()=>e.showExpand)}),{items:k}=Zt(e,f),w=I(()=>e.search),{filteredItems:S}=Ze(e,k,w,{transform:e=>e.columns,customKeyFilter:_}),{toggleSort:P}=Xe({initialSortOrder:o,sortBy:s,multiSort:r,mustSort:i}),{sortByWithGroups:V,opened:$,extractRows:B,isGroupOpen:F,toggleGroup:C}=et({groupBy:n,sortBy:s,disableSort:p}),{sortedItems:T}=tt(e,S,V,{transform:e=>({...e.raw,...e.columns}),sortFunctions:b,sortRawFunctions:x}),{flatItems:D}=at(T,n,$,()=>!!l["group-summary"]),E=d(()=>B(D.value)),{isSelected:O,select:A,selectAll:N,toggleSelect:z,someSelected:H,allSelected:U}=ot(e,{allItems:E,currentPage:E}),{isExpanded:L,toggleExpand:W}=st(e),{containerRef:M,markerRef:q,paddingTop:K,paddingBottom:J,computedItems:Q,handleItemResize:Y,handleScroll:Z,handleScrollend:X,calculateVisibleItems:ee,scrollToIndex:te}=mt(e,D),ae=d(()=>Q.value.map(e=>({...e.raw,virtualIndex:e.index})));rt({sortBy:s,page:R(1),itemsPerPage:R(-1),groupBy:n,search:w}),G({VDataTableRows:{hideNoData:I(()=>e.hideNoData),noDataText:I(()=>e.noDataText),loading:I(()=>e.loading),loadingText:I(()=>e.loadingText)}});const le=d(()=>({sortBy:s.value,toggleSort:P,someSelected:H.value,allSelected:U.value,isSelected:O,select:A,selectAll:N,toggleSelect:z,isExpanded:L,toggleExpand:W,isGroupOpen:F,toggleGroup:C,items:E.value.map(e=>e.raw),internalItems:E.value,groupedItems:D.value,columns:f.value,headers:y.value}));return u(()=>{const t=zt.filterProps(v(e,["multiSort"])),n=qt.filterProps(e),o=Jt.filterProps(e);return m(Jt,g({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},o,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>l.top?.(le.value),wrapper:()=>c("div",{ref:M,onScrollPassive:Z,onScrollend:X,class:"v-table__wrapper",style:{height:h(e.height)}},[c("table",null,[l.colgroup?.(le.value),!e.hideDefaultHeader&&c("thead",{key:"thead"},[m(zt,g(t,{multiSort:!!e.multiSort}),l)]),l.thead?.(le.value),!e.hideDefaultBody&&c("tbody",{key:"tbody"},[c("tr",{ref:q,style:{height:h(K.value),border:0}},[c("td",{colspan:f.value.length,style:{height:0,border:0}},null)]),l["body.prepend"]?.(le.value),m(qt,g(a,n,{items:ae.value}),{...l,item:e=>m(gt,{key:e.internalItem.index,renderless:!0,"onUpdate:height":t=>Y(e.internalItem.index,t)},{default:t=>{let{itemRef:a}=t;return l.item?.({...e,itemRef:a})??m(Wt,g(e.props,{ref:a,key:e.internalItem.index,index:e.index}),l)}})}),l["body.append"]?.(le.value),c("tr",{style:{height:h(J.value),border:0}},[c("td",{colspan:f.value.length,style:{height:0,border:0}},null)])]),l.tbody?.(le.value),l.tfoot?.(le.value)])]),bottom:()=>l.bottom?.(le.value)})}),{calculateVisibleItems:ee,scrollToIndex:te}}}),la={class:"venn-element venn-element-first"},na={class:"venn-element venn-element-intersect"},oa={class:"venn-element venn-element-second"},sa={class:"venn-element venn-element-remaining"},ra=Oe(z({__name:"VennDiagram",props:{total:{},first:{},second:{},intersect:{},firstName:{},secondName:{}},setup(e){const t=e;const a=d(()=>t.first-t.intersect),l=d(()=>t.second-t.intersect),n=d(()=>t.total-t.first-t.second+t.intersect),o=d(()=>a.value/t.total),s=d(()=>l.value/t.total),r=d(()=>t.intersect/t.total),i=d(()=>n.value/t.total),u=d(()=>{const[e,t,a,l]=function(e,t){const a=e.map((e,t)=>({index:t,value:e}));for(const l of Array.from({length:20})){const e=a.filter(({value:e})=>e<t&&0!==e),l=a.filter(({value:e})=>e>=t);if(0===e.length)break;const n=t-Math.min(...e.map(({value:e})=>e)),o=n*e.length,s=l.reduce((e,{value:a})=>e+(a-t),0);for(const{index:t,value:i}of l){const e=i/s*o;a[t].value-=e}for(const{index:t}of e)a[t].value+=n;const r=a.reduce((e,{value:t})=>e+t,0);for(const t of a)t.value/=r}return a.map(({value:e})=>e)}([o.value,s.value,r.value,i.value],.04);return`grid-template-columns: ${100*e}% ${100*a}% ${100*t}% ${100*l}%;`});return(e,a)=>(U(),H("div",{class:"venn-container",style:V(u.value)},[c("div",la,[m(De,{activator:"parent",location:"top"},{default:L(()=>[$(C(`${t.firstName}: ${t.first} (${(t.first/t.total*100).toFixed(2)}%)`),1)]),_:1})]),c("div",na,[m(De,{activator:"parent",location:"top"},{default:L(()=>[$(C(`${e.$t("conjunctions.both_a_and_b",{a:t.firstName,b:t.secondName})}: ${t.intersect} (${(t.intersect/t.total*100).toFixed(2)}%)`),1)]),_:1})]),c("div",oa,[m(De,{activator:"parent",location:"top"},{default:L(()=>[$(C(`${t.secondName}: ${t.second} (${(t.second/t.total*100).toFixed(2)}%)`),1)]),_:1})]),c("div",sa,[m(De,{activator:"parent",location:"top"},{default:L(()=>[$(C(`${e.$t("conjunctions.neither_a_nor_b",{a:t.firstName,b:t.secondName})}: ${n.value} (${(n.value/t.total*100).toFixed(2)}%)`),1)]),_:1})])],4))}}),[["__scopeId","data-v-9c895e02"]]),ia={style:{height:"48px",width:"100%"}},da={class:"text-h5 mb-6"},ua={class:"mb-4 text-medium-emphasis text-body-2"},ca=z({__name:"TagInsight",setup(e){const t=W(),a=d(()=>{const e=[];for(const[a,l]of t.tags)e.push(...l.map((e,t)=>({title:`${a}:${e}`,value:{entry:a,index:t,name:`${a}:${e}`}})));return e}),l=M({first:a.value[0].value,second:a.value[1].value}),n=d(()=>a.value.filter(({value:{entry:e,index:t}})=>void 0===l.second||null===l.second||(l.second.entry!==e||l.second.index!==t))),o=d(()=>a.value.filter(({value:{entry:e,index:t}})=>void 0===l.first||null===l.first||(l.first.entry!==e||l.first.index!==t)));const s=d(()=>void 0!==l.first&&void 0!==l.second&&null!==l.first&&null!==l.second?function(e){const a={first:0,second:0,intersect:0},[{entry:l,index:n},{entry:o,index:s}]=e;for(const r of t.data.values()){if(void 0===r.entries)continue;const e=r.entries.get(l),t=r.entries.get(o);e?.tags.includes(n)&&(a.first+=1),t?.tags.includes(s)&&(a.second+=1),e?.tags.includes(n)&&t?.tags.includes(s)&&(a.intersect+=1)}return a}([l.first,l.second]):{first:0,second:0,intersect:0});return(e,r)=>{const i=ra;return a.value.length>=2?(U(),H(p,{key:0},[m(Se,{align:"center",class:"mb-4",justify:"space-around"},{default:L(()=>[m(Ae,null,{default:L(()=>[m(it,{modelValue:l.first,"onUpdate:modelValue":r[0]||(r[0]=e=>l.first=e),"hide-details":"",items:n.value},null,8,["modelValue","items"])]),_:1}),m(Ae,{cols:"1",style:{"text-align":"center"}},{default:L(()=>[m(xe,{icon:"mdi-arrow-left-right"})]),_:1}),m(Ae,null,{default:L(()=>[m(it,{modelValue:l.second,"onUpdate:modelValue":r[1]||(r[1]=e=>l.second=e),"hide-details":"",items:o.value},null,8,["modelValue","items"])]),_:1})]),_:1}),c("div",ia,[m(i,{first:s.value.first,"first-name":l.first?.name??"",intersect:s.value.intersect,second:s.value.second,"second-name":l.second?.name??"",total:K(t).data.size},null,8,["first","first-name","intersect","second","second-name","total"])])],64)):(U(),q(Ee,{key:1,class:"pa-4 text-center mx-auto"},{default:L(()=>[m(xe,{class:"mb-5",icon:"mdi-tag-off",size:"48"}),c("h2",da,C(e.$t("message.no_tags_to_be_inspected.title")),1),c("p",ua,C(e.$t("message.no_tags_to_be_inspected.description")),1)]),_:1}))}}}),pa=z({__name:"TagManagement",setup(e){const t=W(),a=J(),{t:l}=Q.global,n=M({selected_entry:null,selected_tags:[],entry_search:"",dialog:{shown:!1,next:()=>{},title:"",type:"remove"},rename_into:"",merge_into:0});function o(){n.selected_tags.splice(0),n.entry_search=""}const s=[{key:"id",extra:{align:"center",sortable:!0}},{key:"content",extra:{sortable:!0}},{key:"references",extra:{sortable:!0}},{key:"actions",extra:{sortable:!1}}].map(({key:e,extra:t})=>({key:e,title:l(`maintenance.tag_management.table.titles.${e}`),...t})),r=d(()=>{if(null===n.selected_entry)return[];const e=t.tags.get(n.selected_entry);if(void 0===e)return[];const a=e.map((e,t)=>({id:t,content:e,references:0,actions:""}));for(const l of t.data.values()){if(void 0===l.entries)continue;const e=l.entries.get(n.selected_entry);if(void 0!==e)for(const t of e.tags)a[t].references+=1}return a}),i=d(()=>r.value.filter(({references:e})=>0===e)),u=d(()=>n.selected_tags.map(e=>({title:r.value[e].content,value:e})));function c(e,n){const o=t.remove_tag(e,n);o.is_err()&&a.post_notify("error",l("message.error.failed_to_remove_tag"),String(o.unwrap_error()))}return(e,d)=>(U(),H(p,null,[m(dt,{modelValue:n.selected_entry,"onUpdate:modelValue":[d[0]||(d[0]=e=>n.selected_entry=e),o],items:[...K(t).tags.keys()],label:e.$t("maintenance.tag_management.entry_picker")},null,8,["modelValue","items","label"]),r.value.length>5?(U(),q(vt,{key:0,modelValue:n.entry_search,"onUpdate:modelValue":d[1]||(d[1]=e=>n.entry_search=e),class:"mx-8",clearable:"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])):Y("",!0),null!==n.selected_entry?(U(),q(aa,{key:1,modelValue:n.selected_tags,"onUpdate:modelValue":d[2]||(d[2]=e=>n.selected_tags=e),"filter-keys":"content","fixed-header":"",headers:K(s),height:"360px",items:r.value,search:n.entry_search,"show-select":"",striped:"odd"},{"item.actions":L(({item:e})=>[m(fe,{icon:"mdi-pencil-outline",size:"small",variant:"plain",onClick:o=>{return s=n.selected_entry,r=e.id,i=e.content,n.dialog.next=()=>{const e=n.rename_into.trim();if(0===e.length)return void a.post_notify("error",l("message.error.failed_to_rename_tag"),l("message.error.empty_tag_name.brief")+": "+l("message.error.empty_tag_name.detail"));const o=t.rename_tag(s,r,e);o.is_err()&&a.post_notify("error",l("message.error.failed_to_rename_tag"),String(o.unwrap_error()))},n.dialog.title=l("maintenance.tag_management.confirm_rename.title",{old_name:i}),n.dialog.type="rename",n.rename_into=i,void(n.dialog.shown=!0);var s,r,i}},null,8,["onClick"]),m(fe,{icon:"mdi-delete-outline",size:"small",variant:"plain",onClick:t=>function(e,t,a){const o=()=>{c(e,[t])};a>0?(n.dialog.next=o,n.dialog.title=l("maintenance.tag_management.confirm_removal.title"),n.dialog.type="remove",n.dialog.shown=!0):o()}(n.selected_entry,e.id,e.references)},null,8,["onClick"])]),_:1},8,["modelValue","headers","items","search"])):Y("",!0),m(Se,{class:"mt-4",justify:"space-between"},{default:L(()=>[m(Ae,{cols:"6"},{default:L(()=>[n.selected_tags.length>1?(U(),q(fe,{key:0,block:"",onClick:d[3]||(d[3]=e=>{return o=n.selected_entry,n.dialog.next=()=>{const e=t.merge_tags(o,n.selected_tags,n.merge_into);e.is_err()?a.post_notify("error",l("message.error.failed_to_remove_tag"),String(e.unwrap_error())):n.selected_tags.splice(0)},n.dialog.title=l("maintenance.tag_management.confirm_merge.title"),n.dialog.type="merge",n.merge_into=n.selected_tags[0],void(n.dialog.shown=!0);var o})},{default:L(()=>[$(C(e.$t("maintenance.tag_management.merge_tags")),1)]),_:1})):Y("",!0)]),_:1}),m(Ae,{cols:"6"},{default:L(()=>[i.value.length>0?(U(),q(fe,{key:0,block:"",onClick:d[4]||(d[4]=e=>c(n.selected_entry,i.value.map(({id:e})=>e)))},{default:L(()=>[$(C(e.$t("maintenance.tag_management.remove_unused_tags")),1)]),_:1})):Y("",!0)]),_:1})]),_:1}),m($e,{modelValue:n.dialog.shown,"onUpdate:modelValue":d[9]||(d[9]=e=>n.dialog.shown=e),contained:"",height:"100%",width:"100%"},{default:L(()=>[m(kt,{disabled:!1,onCancel:d[7]||(d[7]=e=>n.dialog.shown=!1),onSave:d[8]||(d[8]=e=>{n.dialog.next(),n.dialog.shown=!1})},{default:L(({actions:t})=>[m(Pe,{class:"mx-auto","max-width":"60%",style:{top:"50%",transform:"translateY(-50%)"}},{actions:L(()=>[m(yt),(U(),q(Z(t)))]),default:L(()=>[m(Ve,null,{default:L(()=>[$(C(n.dialog.title),1)]),_:1}),"remove"===n.dialog.type?(U(),q(Ie,{key:0},{default:L(()=>[$(C(e.$t("maintenance.tag_management.confirm_removal.explanation")),1)]),_:1})):"rename"===n.dialog.type?(U(),q(Ie,{key:1},{default:L(()=>[m(vt,{modelValue:n.rename_into,"onUpdate:modelValue":d[5]||(d[5]=e=>n.rename_into=e),label:e.$t("maintenance.tag_management.confirm_rename.rename_into")},null,8,["modelValue","label"])]),_:1})):"merge"===n.dialog.type?(U(),q(Ie,{key:2},{default:L(()=>[m(dt,{modelValue:n.merge_into,"onUpdate:modelValue":d[6]||(d[6]=e=>n.merge_into=e),items:u.value,label:e.$t("maintenance.tag_management.confirm_merge.merge_into")},null,8,["modelValue","items","label"])]),_:1})):Y("",!0)]),_:2},1024)]),_:1})]),_:1},8,["modelValue"])],64))}}),ma={class:"allocation-image"},ga=Oe(z({__name:"DatabaseMaintenance",setup(e){X(e=>({v7a1944f2:K(me).columns,v4ab9ac6f:K(me).rows}));const{t:t}=Q.global,a=x(Be),l=W(),n=ee(),o=te({initialized:!1,encrypted_counter:0,pending_encryptions:0,image_pools:[],password:"",new_password:"",blocking:!1});function s(){oe(new Blob([(new TextEncoder).encode(JSON.stringify(l.database_.configurations.entry))],{type:"application/json"}),"configuration.json")}ae(()=>{void 0!==l.database_?(o.encrypted_counter=l.database_.protection.encrypted_counter,o.pending_encryptions=l.encrypts_to_be_done,o.image_pools=l.query_image_pool_allocation(),o.initialized=!0,l.encrypts_to_be_done=0):n.replace("/")});const r=d(()=>o.encrypted_counter+o.pending_encryptions>=le),i=d(()=>(o.encrypted_counter+o.pending_encryptions)/le);function u(){o.blocking=!0,se(async function(){const e=await re(o.password,l.database_.runtime.protection.argon2);if(e.is_err())return e.erase_type();const{key:t}=e.unwrap(),a=await ie(t,l.database_.runtime.protection.key_nonce,l.database_.runtime.protection.encrypted_key);if(a.is_err())return a.erase_type();const n=de(32),s=await ue(n,{encrypt:!0}),{data:r,nonce:i}=await ce(t,n);return l.update_data_key({encrypted_key:r,nonce:i,key:s}),o.password="",o.encrypted_counter=l.database_.protection.encrypted_counter,pe.ok(void 0)}(),t("maintenance.do_rekey"),a).finally(()=>{o.blocking=!1})}function g(){o.blocking=!0,se(async function(){const e=await re(o.password,l.database_.runtime.protection.argon2);if(e.is_err())return e.erase_type();const{key:t}=e.unwrap(),a=await ie(t,l.database_.runtime.protection.key_nonce,l.database_.runtime.protection.encrypted_key);if(a.is_err())return a.erase_type();const n=await re(o.new_password,l.database_.runtime.protection.argon2);if(n.is_err())return n.erase_type();const{key:s}=n.unwrap(),{data:r,nonce:i}=await ce(s,a.unwrap());return l.update_data_key({encrypted_key:r,nonce:i}),o.password="",o.new_password="",pe.ok(void 0)}(),t("maintenance.change_password"),a).finally(()=>{o.blocking=!1})}return(e,t)=>K(o).initialized?(U(),q(Fe,{key:0,class:"main-container"},{default:L(()=>[K(o).image_pools.length>0?(U(),q(Pe,{key:0},{default:L(()=>[m(Ve,null,{default:L(()=>[$(C(e.$t("maintenance.image_allocation")),1)]),_:1}),m(Ie,null,{default:L(()=>[m(ht,{"hide-delimiters":"","show-arrows":""},{default:L(()=>[(U(!0),H(p,null,ne(K(o).image_pools,e=>(U(),q(_t,{key:e.name},{default:L(()=>[m(Pe,null,{default:L(()=>[m(Ve,{style:{"text-align":"center"}},{default:L(()=>[$(C(e.name),1)]),_:2},1024),m(Ie,null,{default:L(()=>[c("div",ma,[(U(!0),H(p,null,ne(e.allocations,(e,t)=>(U(),H("span",{key:t,class:_(e?"allocated":"unallocated")},null,2))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):Y("",!0),m(Pe,null,{default:L(()=>[m(Ve,null,{default:L(()=>[$(C(e.$t("maintenance.tag_insight.title")),1)]),_:1}),m(Ce,null,{default:L(()=>[$(C(e.$t("maintenance.tag_insight.subtitle")),1)]),_:1}),m(Ie,null,{default:L(()=>[m(ca)]),_:1})]),_:1}),K(l).tags.size>0?(U(),q(Pe,{key:1},{default:L(()=>[m(Ve,null,{default:L(()=>[$(C(e.$t("maintenance.tag_management.title")),1)]),_:1}),m(Ie,null,{default:L(()=>[m(pa)]),_:1})]),_:1})):Y("",!0),m(Pe,{class:"danger-zone",variant:"outlined"},{default:L(()=>[m(Ve,null,{default:L(()=>[$(C(e.$t("maintenance.danger_zone")),1)]),_:1}),m(Ce,null,{default:L(()=>[$(C(e.$t("maintenance.danger_zone_explained")),1)]),_:1}),m(Ie,null,{default:L(()=>[m(fe,{block:"",class:"mb-1",onClick:s},{default:L(()=>[$(C(e.$t("maintenance.export_configuration")),1)]),_:1}),c("p",null,C(e.$t("maintenance.export_configuration_detail")),1)]),_:1})]),_:1}),m(Pe,{class:"critical-zone",variant:"outlined"},{default:L(()=>[m(Ve,null,{default:L(()=>[$(C(e.$t("maintenance.critical_zone")),1)]),_:1}),m(Ce,null,{default:L(()=>[$(C(e.$t("maintenance.critical_zone_explained")),1)]),_:1}),m(Ie,null,{default:L(()=>[m(vt,{modelValue:K(o).password,"onUpdate:modelValue":t[0]||(t[0]=e=>K(o).password=e),label:e.$t("message.input_password"),type:"password",variant:"outlined"},null,8,["modelValue","label"]),m(pt,{class:"my-4"}),m(Te,{modelValue:K(o).encrypted_counter,"onUpdate:modelValue":t[1]||(t[1]=e=>K(o).encrypted_counter=e),"buffer-value":0!==K(o).pending_encryptions?K(o).encrypted_counter+K(o).pending_encryptions:0,color:i.value<.6?"success":i.value<.9?"warning":"error",height:"25px",max:K(le)},{default:L(()=>[$(C(K(o).encrypted_counter)+" "+C(0!==K(o).pending_encryptions?`(+${K(o).pending_encryptions})`:"")+" / "+C(K(le)),1)]),_:1},8,["modelValue","buffer-value","color","max"]),c("p",{style:V(r.value?"color: rgb(var(--v-theme-error))":"inherit")},C(e.$t(r.value?"maintenance.rekey_required":"maintenance.rekey")),5),m(fe,{block:"",class:"mt-2",color:r.value?"primary":"",disabled:0===K(o).password.length,loading:K(o).blocking,"prepend-icon":"mdi-dice-multiple",onClick:u},{default:L(()=>[$(C(e.$t("maintenance.do_rekey")),1)]),_:1},8,["color","disabled","loading"]),m(pt,{class:"my-4"}),m(vt,{modelValue:K(o).new_password,"onUpdate:modelValue":t[2]||(t[2]=e=>K(o).new_password=e),label:e.$t("message.input_new_password"),type:"password",variant:"outlined"},null,8,["modelValue","label"]),m(fe,{block:"",disabled:0===K(o).password.length||0===K(o).new_password.length,loading:K(o).blocking,onClick:g},{default:L(()=>[$(C(e.$t("maintenance.change_password")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),m(fe,{block:"",to:"/Main"},{default:L(()=>[$(C(e.$t("action.back_to_last_step")),1)]),_:1})]),_:1})):Y("",!0)}}),[["__scopeId","data-v-626f90aa"]]),fa=z({__name:"Maintenance",setup:e=>(e,t)=>(U(),q(ga))});export{fa as default};
